{"remainingRequest":"C:\\Users\\Ray\\WebstormProjects\\vote_app3\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Ray\\WebstormProjects\\vote_app3\\src\\components\\account\\voteList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app3\\src\\components\\account\\voteList.vue","mtime":1577873588968},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app3\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app3\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app3\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJ2b3RlTGlzdCIsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlzTG9naW46IGZhbHNlLAogICAgICAgICAgICBsb2dpblVzZXI6IHt9LAogICAgICAgICAgICB2b3RlTGlzdDogW10sCiAgICAgICAgICAgIFFSY29kZTogJycsCiAgICAgICAgICAgIHNob3J0VXJsOiAnJywKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC8vIGhhbmRsZUVkaXQoaW5kZXgsIHJvdykgewogICAgICAgIC8vCiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGluZGV4LCByb3cpOwogICAgICAgIC8vIH0sCiAgICAgICAgYXN5bmMgaGFuZGxlU2hhcmUocm93KSB7CiAgICAgICAgICAgIHRoaXMuUVJjb2RlID0gYXdhaXQgdGhpcy5nZXRRUmNvZGUocm93LmlkKTsKICAgICAgICAgICAgdGhpcy5zaG9ydFVybCA9IGF3YWl0IHRoaXMuZ2V0U2hvcnRVcmwocm93LmlkKTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZURlbGV0ZShpbmRleCwgcm93KSB7CiAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5Yig6Zmk6K+l5oqV56Wo5L+h5oGvLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgbGV0IGlzRGVsID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpIGluIHRoYXQudm90ZUxpc3QpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC52b3RlTGlzdFtpXS5pZCA9PSByb3cuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC52b3RlTGlzdFtpXS5mbGFnID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgaXNEZWwgPSBhd2FpdCB0aGF0LmRlbGV0ZVZvdGUodGhhdC52b3RlTGlzdFtpXSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGlzRGVsID09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICB0aGF0LlJlZnJlc2goKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTlpLHotKUhJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc29sZS5sb2coaW5kZXgsIHJvdyk7CiAgICAgICAgfSwKICAgICAgICBnZXRWb3RlTGlzdCgpIHsKICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgICAgICBsZXQgdXJsID0gdGhpcy53ZWJzaXRlICsgIi92b3RlL2dldFZvdGUiOwogICAgICAgICAgICB0aGlzLmF4aW9zLmdldCh1cmwsIHsKICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgIGNyZWF0b3JJZDogdGhpcy5sb2dpblVzZXIuaWQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihhc3luYyBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdExpc3QgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSBpbiByZXN1bHRMaXN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpc3RbaV0udmlkID0gcGFyc2VJbnQoaSkgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaXN0W2ldLmlzRGVhZCA9IHRoYXQuY29tcGFyZVRpbWUocmVzdWx0TGlzdFtpXS5kZWFkbGluZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpc3RbaV0ub3B0aW9uTnVtID0gYXdhaXQgdGhhdC5nZXRPcHRpb25OdW0ocmVzdWx0TGlzdFtpXS5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRMaXN0W2ldLnZvdGVyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpc3RbaV0ucGFydG5lck51bSA9IHJlc3VsdExpc3RbaV0udm90ZXIubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGlzdFtpXS5wYXJ0bmVyTnVtID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0TGlzdFtpXS5mbGFnID09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpc3Quc3BsaWNlKGksIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhhdC52b3RlTGlzdCA9IHJlc3VsdExpc3Q7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCLmn6Xor6LlpLHotKUiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRPcHRpb25OdW0odm90ZUlkKSB7CiAgICAgICAgICAgIGxldCBvcHRpb25OdW0gPSAwOwogICAgICAgICAgICBsZXQgdXJsID0gdGhpcy53ZWJzaXRlICsgIi9vcHRpb24vZ2V0T3B0aW9uTnVtIjsKICAgICAgICAgICAgYXdhaXQgdGhpcy5heGlvcy5nZXQodXJsLCB7CiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICB2b3RlSWQ6IHZvdGVJZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBvcHRpb25OdW0gPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCLmn6Xor6LlpLHotKUiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gb3B0aW9uTnVtOwogICAgICAgIH0sCiAgICAgICAgY29tcGFyZVRpbWUoZGF0ZUZvcm1hdCkgewogICAgICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKGRhdGVGb3JtYXQpOwogICAgICAgICAgICBsZXQgbm93RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIGlmIChkYXRlLmdldFRpbWUoKSA+IG5vd0RhdGUuZ2V0VGltZSgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZGVsZXRlVm90ZSh2b3RlKSB7CiAgICAgICAgICAgIGxldCBpc0RlbCA9IGZhbHNlOwogICAgICAgICAgICBsZXQgdXJsID0gdGhpcy53ZWJzaXRlICsgIi92b3RlL2RlbFZvdGUiOwogICAgICAgICAgICBhd2FpdCB0aGlzLmF4aW9zLnBvc3QodXJsLCB2b3RlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBpc0RlbCA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlzRGVsID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICB9KQogICAgICAgICAgICByZXR1cm4gaXNEZWw7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRRUmNvZGUoaWQpIHsKICAgICAgICAgICAgbGV0IFFSY29kZSA9ICcnOwogICAgICAgICAgICBsZXQgbG9uZ1VybCA9IHRoaXMud2Vic2l0ZTIgKyAnL2RldGFpbD92b3RlSWQ9JyArIGlkOwogICAgICAgICAgICBsZXQgdXJsID0gJ3BjL1FSY29kZSc7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXhpb3MuZ2V0KHVybCwgewogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogbG9uZ1VybCwKICAgICAgICAgICAgICAgICAgICBrZXk6ICdkNmU5M2RmNTg5MzdiOTk5NWM1MmQ3OTk4Yjg1MTNiOCcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5lcnJvcl9jb2RlID09IDApIHsKICAgICAgICAgICAgICAgICAgICBRUmNvZGUgPSAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LCIgKyByZXNwb25zZS5kYXRhLnJlc3VsdC5iYXNlNjRfaW1hZ2U7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBRUmNvZGU7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRTaG9ydFVybChpZCkgewogICAgICAgICAgICBsZXQgc2hvcnRVcmwgPSAnJzsKICAgICAgICAgICAgbGV0IGxvbmdVcmwgPSB0aGlzLndlYnNpdGUyICsgJy9kZXRhaWw/dm90ZUlkPScgKyBpZDsKICAgICAgICAgICAgbGV0IHVybCA9ICJwYy9zaG9ydFVybCI7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXhpb3MuZ2V0KHVybCwgewogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAnanNvbicsCiAgICAgICAgICAgICAgICAgICAgdXJsOiBsb25nVXJsLAogICAgICAgICAgICAgICAgICAgIGtleTogJzVlMDllMWVmYjFiNjNjMmQ5MDU0MTk5MkAwMWQxZjk0NzMyOGU1YWEyMDY4MGM3NTRjMTJlZWY5MCcsCiAgICAgICAgICAgICAgICAgICAgZXhwaXJlRGF0ZTogJzIwMjAtMDMtMzEnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5lcnIgPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICBzaG9ydFVybCA9IHJlc3BvbnNlLmRhdGEudXJsOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgcmV0dXJuIHNob3J0VXJsOwogICAgICAgIH0sCiAgICAgICAgUmVmcmVzaCgpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLnZvdGVMaXN0KSB7CiAgICAgICAgICAgICAgICB0aGlzLnZvdGVMaXN0W2ldLnZpZCA9IHBhcnNlSW50KGkpICsgMTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnZvdGVMaXN0W2ldLmZsYWcgPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudm90ZUxpc3Quc3BsaWNlKGksIDEpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHRvY3JlYXRlVm90ZSgpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6J2NyZWF0ZVZvdGUnfSkKICAgICAgICB9LAogICAgfSwKICAgIGFzeW5jIG1vdW50ZWQoKSB7CiAgICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpICE9IG51bGwgfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpICE9IG51bGwpIHsKICAgICAgICAgICAgdGhpcy5pc0xvZ2luID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHRoaXMubG9naW5Vc2VyID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJsb2dpblVzZXIiKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJsb2dpblVzZXIiKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICB0aGlzLmxvZ2luVXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyB0aGlzLmxvZ2luVXNlcj10aGlzLiRyb3V0ZS5wYXJhbXMubG9naW5Vc2VyOwogICAgICAgIHRoaXMuZ2V0Vm90ZUxpc3QoKTsKCiAgICB9Cn0K"},{"version":3,"sources":["voteList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"voteList.vue","sourceRoot":"src/components/account","sourcesContent":["<template>\r\n    <div>\r\n        <h1 class=\"page-header text-overflow\">投票列表</h1>\r\n        <ol class=\"breadcrumb\">\r\n            <li>用户中心</li>\r\n            <li><i class=\"el-icon-arrow-right\"></i>投票列表</li>\r\n        </ol>\r\n        <div class=\"card mycard\">\r\n            <h5 class=\"card-header\">投票列表</h5>\r\n            <div class=\"card-body\">\r\n                <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"small \" @click=\"tocreateVote\">创建投票</el-button>\r\n                <el-table\r\n                        :data=\"voteList\"\r\n                        stripe\r\n                        style=\"width: 100%\"\r\n                        type=index>\r\n                    <el-table-column\r\n                            prop=\"vid\"\r\n                            label=\"序号\"\r\n                            width=\"80\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"title\"\r\n                            label=\"标题\"\r\n                            width=\"180\">\r\n                    </el-table-column>\r\n                    <el-table-column label=\"状态\" width=\"120\">\r\n                        <template slot-scope=\"scope\">\r\n                            <span v-if=\"scope.row.isDead\" class=\"badge badge-pill badge-success\">进行中</span>\r\n                            <span v-else class=\"badge badge-pill badge-danger\">已结束</span>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"optionNum\"\r\n                            label=\"选项数量\"\r\n                            width=\"100\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"partnerNum\"\r\n                            label=\"参与人数\"\r\n                            width=\"100\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"deadline\"\r\n                            label=\"结束时间\"\r\n                            width=\"200\">\r\n                    </el-table-column>\r\n                    <el-table-column label=\"操作\">\r\n                        <template slot-scope=\"scope\">\r\n                            <!--                            <el-button-->\r\n                            <!--                                    size=\"mini\"-->\r\n                            <!--                                    type=\"warning\"-->\r\n                            <!--                                    @click=\"handleEdit(scope.$index, scope.row)\">编辑-->\r\n                            <!--                            </el-button>-->\r\n\r\n                            <el-button\r\n                                    size=\"mini\"\r\n                                    type=\"primary\"\r\n                                    data-toggle=\"modal\" data-target=\"#exampleModalCenter\"\r\n                                    @click=\"handleShare(scope.row)\">分享\r\n                            </el-button>\r\n                            <el-button\r\n                                    size=\"mini\"\r\n                                    type=\"danger\"\r\n                                    @click=\"handleDelete(scope.$index, scope.row)\">删除\r\n                            </el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n            </div>\r\n        </div>\r\n        <!-- Modal -->\r\n        <div class=\"modal fade\" id=\"exampleModalCenter\" tabindex=\"-1\" role=\"dialog\"\r\n             aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"exampleModalCenterTitle\">分享</h5>\r\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                            <span aria-hidden=\"true\">&times;</span>\r\n                        </button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <div class=\"d-flex justify-content-center\"><img :src=QRcode></div>\r\n                        <div class=\"d-flex justify-content-center\">复制链接：{{shortUrl}}</div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\">确认</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"voteList\",\r\n        data() {\r\n            return {\r\n                isLogin: false,\r\n                loginUser: {},\r\n                voteList: [],\r\n                QRcode: '',\r\n                shortUrl: '',\r\n            }\r\n        },\r\n        methods: {\r\n            // handleEdit(index, row) {\r\n            //\r\n            //     console.log(index, row);\r\n            // },\r\n            async handleShare(row) {\r\n                this.QRcode = await this.getQRcode(row.id);\r\n                this.shortUrl = await this.getShortUrl(row.id);\r\n            },\r\n            handleDelete(index, row) {\r\n                let that = this;\r\n                this.$confirm('此操作将删除该投票信息, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(async () => {\r\n                    let isDel = false;\r\n                    for (let i in that.voteList) {\r\n                        if (that.voteList[i].id == row.id) {\r\n                            that.voteList[i].flag = true;\r\n                            isDel = await that.deleteVote(that.voteList[i]);\r\n                        }\r\n                    }\r\n                    if (isDel == true) {\r\n                        that.Refresh();\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: '删除成功!'\r\n                        });\r\n                    } else {\r\n                        this.$message({\r\n                            type: 'error',\r\n                            message: '删除失败!'\r\n                        });\r\n                    }\r\n                }).catch(() => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '已取消删除'\r\n                    });\r\n                });\r\n                console.log(index, row);\r\n            },\r\n            getVoteList() {\r\n                let that = this;\r\n                let url = this.website + \"/vote/getVote\";\r\n                this.axios.get(url, {\r\n                    params: {\r\n                        creatorId: this.loginUser.id\r\n                    }\r\n                }).then(async function (response) {\r\n                    if (response.data.code == 200) {\r\n                        let resultList = response.data.data;\r\n                        for (let i in resultList) {\r\n                            resultList[i].vid = parseInt(i) + 1;\r\n                            resultList[i].isDead = that.compareTime(resultList[i].deadline);\r\n                            resultList[i].optionNum = await that.getOptionNum(resultList[i].id);\r\n                            if (resultList[i].voter != null) {\r\n                                resultList[i].partnerNum = resultList[i].voter.length;\r\n                            } else {\r\n                                resultList[i].partnerNum = 0;\r\n                            }\r\n                            if (resultList[i].flag == true) {\r\n                                resultList.splice(i, 1)\r\n                            }\r\n                        }\r\n                        that.voteList = resultList;\r\n                    } else {\r\n                        // console.log(\"查询失败\");\r\n                    }\r\n                }).catch(function () {\r\n                    // eslint-disable-next-line no-console\r\n                    // console.log(err);\r\n                })\r\n            },\r\n            async getOptionNum(voteId) {\r\n                let optionNum = 0;\r\n                let url = this.website + \"/option/getOptionNum\";\r\n                await this.axios.get(url, {\r\n                    params: {\r\n                        voteId: voteId\r\n                    }\r\n                }).then(function (response) {\r\n                    if (response.data.code == 200) {\r\n                        optionNum = response.data.data;\r\n                    } else {\r\n                        // console.log(\"查询失败\");\r\n                    }\r\n                }).catch(function () {\r\n                    // eslint-disable-next-line no-console\r\n                    // console.log(err);\r\n                });\r\n                return optionNum;\r\n            },\r\n            compareTime(dateFormat) {\r\n                let date = new Date(dateFormat);\r\n                let nowDate = new Date();\r\n                if (date.getTime() > nowDate.getTime()) {\r\n                    return true;\r\n                } else {\r\n                    return false;\r\n                }\r\n            },\r\n            async deleteVote(vote) {\r\n                let isDel = false;\r\n                let url = this.website + \"/vote/delVote\";\r\n                await this.axios.post(url, vote).then(function (response) {\r\n                    if (response.data.code == 200) {\r\n                        isDel = true;\r\n                    } else {\r\n                        isDel = false;\r\n                    }\r\n                }).catch(function () {\r\n                    // eslint-disable-next-line no-console\r\n                    // console.log(err);\r\n                })\r\n                return isDel;\r\n            },\r\n            async getQRcode(id) {\r\n                let QRcode = '';\r\n                let longUrl = this.website2 + '/detail?voteId=' + id;\r\n                let url = 'pc/QRcode';\r\n                await this.axios.get(url, {\r\n                    params: {\r\n                        text: longUrl,\r\n                        key: 'd6e93df58937b9995c52d7998b8513b8'\r\n                    }\r\n                },).then(function (response) {\r\n                    if (response.data.error_code == 0) {\r\n                        QRcode = \"data:image/png;base64,\" + response.data.result.base64_image;\r\n                    } else {\r\n                        // console.log(response.data);\r\n                    }\r\n                }).catch(function () {\r\n                    // eslint-disable-next-line no-console\r\n                    // console.log(err);\r\n                });\r\n                return QRcode;\r\n            },\r\n            async getShortUrl(id) {\r\n                let shortUrl = '';\r\n                let longUrl = this.website2 + '/detail?voteId=' + id;\r\n                let url = \"pc/shortUrl\";\r\n                await this.axios.get(url, {\r\n                    params: {\r\n                        format: 'json',\r\n                        url: longUrl,\r\n                        key: '5e09e1efb1b63c2d90541992@01d1f947328e5aa20680c754c12eef90',\r\n                        expireDate: '2020-03-31'\r\n                    }\r\n                }).then(function (response) {\r\n                    if (response.data.err == \"\") {\r\n                        shortUrl = response.data.url;\r\n                    } else {\r\n                        // console.log(response.data)\r\n                    }\r\n                }).catch(function () {\r\n                    // eslint-disable-next-line no-console\r\n                    // console.log(err);\r\n                })\r\n                return shortUrl;\r\n            },\r\n            Refresh() {\r\n                for (let i in this.voteList) {\r\n                    this.voteList[i].vid = parseInt(i) + 1;\r\n                    if (this.voteList[i].flag == true) {\r\n                        this.voteList.splice(i, 1)\r\n                    }\r\n                }\r\n            },\r\n            tocreateVote() {\r\n                this.$router.push({name:'createVote'})\r\n            },\r\n        },\r\n        async mounted() {\r\n            if (sessionStorage.getItem(\"loginUser\") != null || localStorage.getItem(\"loginUser\") != null) {\r\n                this.isLogin = true;\r\n                if (sessionStorage.getItem(\"loginUser\") != null) {\r\n                    this.loginUser = JSON.parse(sessionStorage.getItem(\"loginUser\"));\r\n                }\r\n                if (localStorage.getItem(\"loginUser\") != null) {\r\n                    this.loginUser = JSON.parse(localStorage.getItem(\"loginUser\"));\r\n                }\r\n            }\r\n            // this.loginUser=this.$route.params.loginUser;\r\n            this.getVoteList();\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .mycard {\r\n        margin-top: 30px\r\n    }\r\n</style>"]}]}