{"remainingRequest":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Ray\\WebstormProjects\\vote_app4\\src\\views\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\src\\views\\detail.vue","mtime":1577879822357},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJkZXRhaWwiLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpc0xvZ2luOmZhbHNlLAogICAgICAgICAgICBsb2dpblVzZXI6e30sCiAgICAgICAgICAgIGlzU2VsZWN0OiAnJywKICAgICAgICAgICAgdm90ZUlkOiAnJywKICAgICAgICAgICAgdm90ZToge30sCiAgICAgICAgICAgIGRlc2NyaXB0aW9uSW1nVXJsOiAnJywKICAgICAgICAgICAgYWN0aXZlOiAwLAogICAgICAgICAgICBvcHRpb25MaXN0OiBbXSwKICAgICAgICAgICAgb3B0aW9uTGlzdFNvcnQ6IFtdLAogICAgICAgICAgICBvbmNlVm90ZU51bTogJycsCiAgICAgICAgICAgIGF2YXRhclVybDonJwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgYXN5bmMgZ2V0Vm90ZSh2b3RlSWQpIHsKICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgICAgICBsZXQgdXJsID0gdGhpcy53ZWJzaXRlKyIvdm90ZS9nZXRWb3RlQnlJZCIKICAgICAgICAgICAgYXdhaXQgdGhpcy5heGlvcy5nZXQodXJsLCB7CiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICB2b3RlSWQ6IHZvdGVJZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICB0aGF0LnZvdGUgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgLy8gLy9jb25zb2xlLmxvZyh0aGF0LnZvdGUpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCLmipXnpajkv6Hmga/mn6Xor6LlpLHotKUiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCApIHsKICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCApOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZ2V0T3B0aW9uKHZvdGVJZCkgewogICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgICAgICAgIGxldCB1cmwgPSB0aGlzLndlYnNpdGUrIi9vcHRpb24vZ2V0T3B0aW9uIgogICAgICAgICAgICBhd2FpdCB0aGlzLmF4aW9zLmdldCh1cmwsIHsKICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgIHZvdGVJZDogdm90ZUlkCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIHRoYXQub3B0aW9uTGlzdCA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygi6YCJ6aG55p+l6K+i5aSx6LSlIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICggKSB7CiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyggKTsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGRvVm90ZSgpIHsKICAgICAgICAgICAgLy8gLy9jb25zb2xlLmxvZyh0aGlzLmlzU2VsZWN0KQogICAgICAgICAgICAvLyAvL2NvbnNvbGUubG9nKHRoaXMub25jZVZvdGVOdW0pCiAgICAgICAgICAgIGlmKHRoaXMuaXNMb2dpbj09ZmFsc2UpewogICAgICAgICAgICAgICAgdGhpcy4kZGlhbG9nLmNvbmZpcm0oewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfnmbvlvZXkuYvlkI7miY3og73ov5vooYzmipXnpajvvIzngrnlh7vnoa7orqTnq4vljbPliY3lvoDnmbvlvZUnCiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAvLyBvbiBjb25maXJtCiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2xvZ2luJzsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAvLyBvbiBjYW5jZWwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICBpZih0aGlzLmlzU2VsZWN0PT0nJyl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGlhbG9nLmFsZXJ0KHsKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeS4gOmhuScKICAgICAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24gY2xvc2UKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGxldCB1cGRhdGVWb3RlclVybD10aGlzLndlYnNpdGUrIi92b3RlL2RvVm90ZSI7CiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbmZpZyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAvL+a3u+WKoOivt+axguWktAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGxldCBwYXJhbXMgPSBuZXcgRm9ybURhdGEoKTsgLy/liJvlu7pmb3Jt5a+56LGhCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgidXNlcklkIiwgdGhpcy5sb2dpblVzZXIuaWQpOwogICAgICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoInZvdGVJZCIsIHRoaXMudm90ZUlkKTsKICAgICAgICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCJvcHRpb25JZCIsIHRoaXMuaXNTZWxlY3QpOwogICAgICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoInZvdGVOdW0iLCB0aGlzLm9uY2VWb3RlTnVtKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmF4aW9zLnB1dCh1cGRhdGVWb3RlclVybCxwYXJhbXMsY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGlhbG9nLmFsZXJ0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5oqV56Wo5oiQ5YqfJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24gY2xvc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvZGV0YWlsJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygi5oqV56Wo5L+h5oGv5L+u5pS55oiQ5YqfIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCLmipXnpajkv6Hmga/kv67mlLnlpLHotKUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICggKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coICk7CiAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgYXN5bmMgbW91bnRlZCgpIHsKICAgICAgICAvLyB0aGlzLnZvdGVJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy52b3RlSWQ7CiAgICAgICAgdGhpcy52b3RlSWQ9dGhpcy4kcm91dGUucXVlcnkudm90ZUlkOwogICAgICAgIGF3YWl0IHRoaXMuZ2V0Vm90ZSh0aGlzLnZvdGVJZCk7CiAgICAgICAgYXdhaXQgdGhpcy5nZXRPcHRpb24odGhpcy52b3RlSWQpOwogICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5vcHRpb25MaXN0KSB7CiAgICAgICAgICAgIHRoaXMub3B0aW9uTGlzdFNvcnRbaV0gPSB0aGlzLm9wdGlvbkxpc3RbaV07CiAgICAgICAgfQogICAgICAgIC8vIHRoaXMuZGVzY3JpcHRpb25JbWdVcmw9J0Q6L3VwbG9hZEZpbGVzLycrdGhpcy52b3RlLmRlc2NyaXB0aW9uSW1nOwogICAgICAgIGxldCB2b3RlU3VtID0gMDsKICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMub3B0aW9uTGlzdCkgewogICAgICAgICAgICB2b3RlU3VtICs9IHRoaXMub3B0aW9uTGlzdFtpXS52b3RlczsKICAgICAgICAgICAgdGhpcy5vcHRpb25MaXN0W2ldLmltZz10aGlzLmltZ1VybCt0aGlzLm9wdGlvbkxpc3RbaV0uaW1nOwogICAgICAgIH0KICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMub3B0aW9uTGlzdFNvcnQpIHsKICAgICAgICAgICAgdGhpcy5vcHRpb25MaXN0U29ydFtpXS5pbWc9dGhpcy5pbWdVcmwrdGhpcy5vcHRpb25MaXN0U29ydFtpXS5pbWc7CiAgICAgICAgfQogICAgICAgIGlmKHZvdGVTdW09PTApewogICAgICAgICAgICBmb3IgKGxldCBqIGluIHRoaXMub3B0aW9uTGlzdCkgewogICAgICAgICAgICAgICAgdGhpcy5vcHRpb25MaXN0W2pdLnBlcmNlbnQgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgfWVsc2UgewogICAgICAgICAgICBmb3IgKGxldCBqIGluIHRoaXMub3B0aW9uTGlzdCkgewogICAgICAgICAgICAgICAgbGV0IGEgPSAodGhpcy5vcHRpb25MaXN0W2pdLnZvdGVzIC8gdm90ZVN1bSkgKiAxMDA7CiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkxpc3Rbal0ucGVyY2VudCA9IGEudG9GaXhlZCgyKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLm9wdGlvbkxpc3Quc29ydChmdW5jdGlvbiAoeCwgeSkgewogICAgICAgICAgICBpZiAoeC5jb250ZW50IDwgeS5jb250ZW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHguY29udGVudCA+IHkuY29udGVudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfSkKICAgICAgICB0aGlzLm9wdGlvbkxpc3RTb3J0LnNvcnQoZnVuY3Rpb24gKHgsIHkpIHsKICAgICAgICAgICAgaWYgKHgudm90ZXMgPCB5LnZvdGVzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoeC52b3RlcyA+IHkudm90ZXMpIHsKICAgICAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9KQogICAgICAgIC8q6I635Y+W5b2T5YmN55m75b2V55So5oi35L+h5oGvKi8KICAgICAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgibG9naW5Vc2VyIikgIT0gbnVsbCB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibG9naW5Vc2VyIikgIT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLmlzTG9naW4gPSB0cnVlOwogICAgICAgICAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgibG9naW5Vc2VyIikgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhpcy5sb2dpblVzZXIgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHRoaXMubG9naW5Vc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibG9naW5Vc2VyIikpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuYXZhdGFyVXJsPXRoaXMuaW1nVXJsK3RoaXMubG9naW5Vc2VyLmF2YXRhcjsKICAgICAgICB0aGlzLmRlc2NyaXB0aW9uSW1nVXJsPXRoaXMuaW1nVXJsK3RoaXMudm90ZS5kZXNjcmlwdGlvbkltZzsKICAgIH0KfQo="},{"version":3,"sources":["detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"detail.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"detail\">\r\n        <van-row>\r\n            <van-col span=\"2\">\r\n                <img id=\"titleImg\" src=\"../assets/images/h1.png\" height=\"24px\" width=\"24px\"/>\r\n            </van-col>\r\n            <van-col span=\"22\">\r\n                <span id=\"title\">{{vote.title}}</span>\r\n            </van-col>\r\n        </van-row>\r\n        <div class=\"d-flex\" id=\"creatorInfo\">\r\n            <van-image\r\n                    round\r\n                    fit=\"none\"\r\n                    width=\"3rem\"\r\n                    height=\"3rem\"\r\n                    :src=avatarUrl\r\n                    style=\"margin-right: 12px\"\r\n            />\r\n            <div>\r\n                <span id=\"s1\">投票发起人</span>\r\n                <span id=\"s2\">{{vote.creator.userName}}</span>\r\n            </div>\r\n        </div>\r\n        <div id=\"deadline\">截止时间：{{vote.deadline}}</div>\r\n        <div id=\"prompt\">(提示：点击选项可查看详情，投票结果于投票后可见)</div>\r\n        <hr>\r\n        <img :src=descriptionImgUrl width=\"360px\">\r\n        <div class=\"description\" v-if=\"vote.description!=null\">{{vote.description}}</div>\r\n        <div class=\"description\" v-else>暂无说明</div>\r\n        <hr>\r\n        <van-tabs v-model=\"active\" id=\"tab1\">\r\n            <van-tab title=\"默认排序\" style=\"width: 400px\">\r\n                <div class=\"options d-flex\" v-for=\"(item,i) in optionList\" :key=i>\r\n                    <img height=\"64px\" width=\"64px\" :src=item.img>\r\n                    <div class=\"option-content\">\r\n                        <div>{{item.content}}</div>\r\n                        <div class=\"d-flex justify-content-end\">\r\n                            <div class=\"progress\" style=\"width: 240px;margin-top: 8px\">\r\n                                <div class=\"progress-bar\" role=\"progressbar\" :style=\"{width: item.percent+'%'}\"\r\n                                     aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\">{{item.percent}} %\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"votenum\">{{item.votes}}票</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </van-tab>\r\n            <van-tab title=\"票数排序\" style=\"width: 400px\">\r\n                <div class=\"options d-flex\" v-for=\"(item,i) in optionListSort\" :key=i>\r\n                    <img height=\"64px\" width=\"64px\" :src=item.img>\r\n                    <div class=\"option-content\">\r\n                        <div>{{item.content}}</div>\r\n                        <div class=\"d-flex justify-content-end\">\r\n                            <div class=\"progress\" style=\"width: 240px;margin-top: 8px\">\r\n                                <div class=\"progress-bar\" role=\"progressbar\" :style=\"{width: item.percent+'%'}\"\r\n                                     aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\">{{item.percent}} %\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"votenum\">{{item.votes}}票</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </van-tab>\r\n        </van-tabs>\r\n        <hr>\r\n        <van-tabs v-model=\"active\" id=\"tab2\">\r\n            <van-tab title=\"参与投票\" style=\"width: 400px\">\r\n                <van-radio-group v-model=\"isSelect\">\r\n                    <van-grid :border=\"false\" :column-num=\"2\">\r\n                        <van-grid-item v-for=\"(item,i) in optionList\" :key=i>\r\n                            <van-image\r\n                                    width=\"160\"\r\n                                    height=\"160\"\r\n                                    lazy-load\r\n                                    :src=item.img\r\n                                    fit=\"cover\"\r\n                                    style=\"margin: 5px\"\r\n                                    radius=\"5px\"\r\n                            />\r\n                            <div class=\"d-flex justify-content-start\" style=\"width: 160px\">\r\n                                <van-radio :name=item.id>{{item.content}}</van-radio>\r\n                            </div>\r\n                        </van-grid-item>\r\n                    </van-grid>\r\n                </van-radio-group>\r\n                <div class=\"d-flex justify-content-between\" style=\"margin: 8px\">\r\n                    <span>选择投票数</span>\r\n                    <van-stepper v-model=\"onceVoteNum\" integer :max=\"vote.onceMaxVote\"/>\r\n                </div>\r\n            </van-tab>\r\n        </van-tabs>\r\n\r\n        <div class=\"d-flex justify-content-center\">\r\n            <van-button class=\"votebutton\" type=\"info\" @click=\"doVote()\">投票</van-button>\r\n        </div>\r\n        <div class=\"d-flex justify-content-center\">\r\n            <van-button class=\"votebutton\" plain type=\"info\">分享投票</van-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"detail\",\r\n        data() {\r\n            return {\r\n                isLogin:false,\r\n                loginUser:{},\r\n                isSelect: '',\r\n                voteId: '',\r\n                vote: {},\r\n                descriptionImgUrl: '',\r\n                active: 0,\r\n                optionList: [],\r\n                optionListSort: [],\r\n                onceVoteNum: '',\r\n                avatarUrl:''\r\n            }\r\n        },\r\n        methods: {\r\n            async getVote(voteId) {\r\n                let that = this;\r\n                let url = this.website+\"/vote/getVoteById\"\r\n                await this.axios.get(url, {\r\n                    params: {\r\n                        voteId: voteId\r\n                    }\r\n                }).then(function (response) {\r\n                    if (response.data.code == 200) {\r\n                        that.vote = response.data.data;\r\n                        // //console.log(that.vote);\r\n                    } else {\r\n                        //console.log(\"投票信息查询失败\");\r\n                    }\r\n                }).catch(function ( ) {\r\n                    // eslint-disable-next-line no-console\r\n                    //console.log( );\r\n                })\r\n            },\r\n            async getOption(voteId) {\r\n                let that = this;\r\n                let url = this.website+\"/option/getOption\"\r\n                await this.axios.get(url, {\r\n                    params: {\r\n                        voteId: voteId\r\n                    }\r\n                }).then(function (response) {\r\n                    if (response.data.code == 200) {\r\n                        that.optionList = response.data.data;\r\n                    } else {\r\n                        //console.log(\"选项查询失败\");\r\n                    }\r\n                }).catch(function ( ) {\r\n                    // eslint-disable-next-line no-console\r\n                    //console.log( );\r\n                })\r\n            },\r\n            doVote() {\r\n                // //console.log(this.isSelect)\r\n                // //console.log(this.onceVoteNum)\r\n                if(this.isLogin==false){\r\n                    this.$dialog.confirm({\r\n                        message: '登录之后才能进行投票，点击确认立即前往登录'\r\n                    }).then(() => {\r\n                        // on confirm\r\n                        window.location.href = '/login';\r\n                    }).catch(() => {\r\n                        // on cancel\r\n                    });\r\n                }else {\r\n                    if(this.isSelect==''){\r\n                        this.$dialog.alert({\r\n                            message: '请选择一项'\r\n                        }).then(() => {\r\n                            // on close\r\n                        });\r\n                    }else{\r\n                        let updateVoterUrl=this.website+\"/vote/doVote\";\r\n                        let config = {\r\n                            headers: { //添加请求头\r\n                                \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n                            }\r\n                        };\r\n                        let params = new FormData(); //创建form对象\r\n                        params.append(\"userId\", this.loginUser.id);\r\n                        params.append(\"voteId\", this.voteId);\r\n                        params.append(\"optionId\", this.isSelect);\r\n                        params.append(\"voteNum\", this.onceVoteNum);\r\n                        this.axios.put(updateVoterUrl,params,config).then(function (response) {\r\n                            if (response.data.code == 200) {\r\n                                this.$dialog.alert({\r\n                                    message: '投票成功'\r\n                                }).then(() => {\r\n                                    // on close\r\n                                    window.location.href = '/detail';\r\n                                });\r\n                                //console.log(\"投票信息修改成功\");\r\n                            } else {\r\n                                //console.log(\"投票信息修改失败\");\r\n                            }\r\n                        }).catch(function ( ) {\r\n                            //console.log( );\r\n                        })\r\n\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        async mounted() {\r\n            // this.voteId = this.$route.params.voteId;\r\n            this.voteId=this.$route.query.voteId;\r\n            await this.getVote(this.voteId);\r\n            await this.getOption(this.voteId);\r\n            for (let i in this.optionList) {\r\n                this.optionListSort[i] = this.optionList[i];\r\n            }\r\n            // this.descriptionImgUrl='D:/uploadFiles/'+this.vote.descriptionImg;\r\n            let voteSum = 0;\r\n            for (let i in this.optionList) {\r\n                voteSum += this.optionList[i].votes;\r\n                this.optionList[i].img=this.imgUrl+this.optionList[i].img;\r\n            }\r\n            for (let i in this.optionListSort) {\r\n                this.optionListSort[i].img=this.imgUrl+this.optionListSort[i].img;\r\n            }\r\n            if(voteSum==0){\r\n                for (let j in this.optionList) {\r\n                    this.optionList[j].percent = 0;\r\n                }\r\n            }else {\r\n                for (let j in this.optionList) {\r\n                    let a = (this.optionList[j].votes / voteSum) * 100;\r\n                    this.optionList[j].percent = a.toFixed(2);\r\n                }\r\n            }\r\n            this.optionList.sort(function (x, y) {\r\n                if (x.content < y.content) {\r\n                    return -1;\r\n                }\r\n                if (x.content > y.content) {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            })\r\n            this.optionListSort.sort(function (x, y) {\r\n                if (x.votes < y.votes) {\r\n                    return 1;\r\n                }\r\n                if (x.votes > y.votes) {\r\n                    return -1;\r\n                }\r\n                return 0;\r\n            })\r\n            /*获取当前登录用户信息*/\r\n            if (sessionStorage.getItem(\"loginUser\") != null || localStorage.getItem(\"loginUser\") != null) {\r\n                this.isLogin = true;\r\n                if (sessionStorage.getItem(\"loginUser\") != null) {\r\n                    this.loginUser = JSON.parse(sessionStorage.getItem(\"loginUser\"));\r\n                }\r\n                if (localStorage.getItem(\"loginUser\") != null) {\r\n                    this.loginUser = JSON.parse(localStorage.getItem(\"loginUser\"));\r\n                }\r\n            }\r\n            this.avatarUrl=this.imgUrl+this.loginUser.avatar;\r\n            this.descriptionImgUrl=this.imgUrl+this.vote.descriptionImg;\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .detail {\r\n        margin-top: 30px;\r\n        margin-bottom: 90px;\r\n    }\r\n\r\n    .detail img {\r\n        margin: 8px 8px;\r\n    }\r\n\r\n    .description {\r\n        margin: 8px 8px;\r\n        font-size: small;\r\n    }\r\n\r\n    .options {\r\n        margin: 3px 8px;\r\n    }\r\n\r\n    .option-content {\r\n        margin: 8px 8px;\r\n    }\r\n\r\n    .votenum {\r\n        margin: 3px;\r\n    }\r\n\r\n    .votebutton {\r\n        width: 160px;\r\n        display: block;\r\n        margin-top: 12px;\r\n\r\n    }\r\n\r\n    #titleImg {\r\n        margin-left: 8px;\r\n        margin-top: 6px\r\n    }\r\n\r\n    #title {\r\n        display: block;\r\n        margin: 6px 0px\r\n    }\r\n\r\n    #creatorInfo {\r\n        margin: 5px 8px\r\n    }\r\n\r\n    #creatorInfo #s1 {\r\n        color: #969799;\r\n        display: block;\r\n        font-size: x-small;\r\n        margin-top: 3px\r\n    }\r\n\r\n    #creatorInfo #s1 {\r\n        display: block;\r\n    }\r\n\r\n    #deadline {\r\n        font-size: x-small;\r\n        margin-left: 8px;\r\n    }\r\n\r\n    #prompt {\r\n        font-size: x-small;\r\n        color: #969799;\r\n        margin-left: 8px;\r\n        margin-bottom: 8px;\r\n    }\r\n\r\n    #tab1 {\r\n        width: 160px;\r\n    }\r\n\r\n    #tab2 {\r\n        width: 80px;\r\n    }\r\n\r\n    hr {\r\n        margin: 0px 8px;\r\n        border: 0;\r\n        color: #e0e0e0;\r\n        background-color: #e0e0e0;\r\n        height: 1px\r\n    }\r\n</style>"]}]}