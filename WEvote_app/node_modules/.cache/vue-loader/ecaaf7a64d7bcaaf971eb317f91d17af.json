{"remainingRequest":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Ray\\WebstormProjects\\vote_app4\\src\\views\\About.vue?vue&type=style&index=0&id=039c5b43&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\src\\views\\About.vue","mtime":1577808013653},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaHIgewogICAgbWFyZ2luLXRvcDogMHB4OwogICAgbWFyZ2luOiAwOwogICAgYm9yZGVyOiAwOwogICAgY29sb3I6ICNlMGUwZTA7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBlMGUwOwogICAgaGVpZ2h0OiAxcHgKfQo="},{"version":3,"sources":["About.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"About.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"about\">\n        <van-row style=\"margin: 30px;\">\n            <van-col span=\"6\" v-if=\"loginUser.avatar==null\">\n                <van-image\n                        round\n                        fit=\"none\"\n                        width=\"4.4rem\"\n                        height=\"4.4rem\"\n                        src=\"http://112.124.26.125/test/image/avatar.png\"\n                        @click=\"showPopup\"\n                />\n            </van-col>\n            <van-col span=\"6\" v-else>\n                <van-image\n                        round\n                        fit=\"none\"\n                        width=\"4.4rem\"\n                        height=\"4.4rem\"\n                        src=\"http://112.124.26.125/test/image/avatar.png\"\n                        @click=\"showPopup\"\n                />\n            </van-col>\n            <van-popup v-model=\"show\" closeable style=\"height:170px;width: 200px\">\n                <van-uploader v-model=\"avatarList\" :max-count=\"1\" style=\"margin-top: 30px;margin-left: 56px\"/>\n                <van-button v-if=\"!showLoading\" type=\"info\" @click=\"uploadAvatar\" loading-text=\"上传中...\" style=\"margin-left: 38px;width: 120px\">点击上传头像</van-button>\n                <van-button v-else type=\"info\" loading loading-text=\"上传中...\" style=\"margin-left: 38px;width: 120px\"></van-button>\n            </van-popup>\n            <van-col span=\"8\">\n                <span v-if=\"!isLogin\" style=\"display:block;margin: 20px 0px\">未登录</span>\n                <span v-else style=\"display:block;margin: 20px 0px\">{{loginUser.userName}}</span>\n            </van-col>\n            <van-col span=\"8\">\n                <van-button v-if=\"!isLogin\" color=\"linear-gradient(to right, #4bb0ff, #6149f6)\"\n                            style=\"margin: 12px 10px;width: 100px\" to=\"login\">登录/注册\n                </van-button>\n                <van-button v-else color=\"linear-gradient(to right, #4bb0ff, #6149f6)\" style=\"margin: 12px 10px\"\n                            @click=\"doLogout\">注销\n                </van-button>\n            </van-col>\n        </van-row>\n\n        <van-row type=\"flex\" justify=\"space-around\" style=\"margin-bottom: 16px\">\n            <van-col span=\"6\">\n                <div>\n                    <span style=\"display: block;font-weight:bold;text-align: center\">0</span>\n                    <span style=\"display: block;font-size: x-small;color: #969799;text-align: center\">报名</span>\n                </div>\n            </van-col>\n            <van-col span=\"6\">\n                <div @click=\"toMyVote\">\n                    <span style=\"display: block;font-weight:bold;text-align: center\">{{voteNum}}</span>\n                    <span style=\"display: block;font-size: x-small;color: #969799;text-align: center\">发起</span>\n                </div>\n            </van-col>\n            <van-col span=\"6\">\n                <div>\n                    <span style=\"display: block;font-weight:bold;text-align: center\">0</span>\n                    <span style=\"display: block;font-size: x-small;color: #969799;text-align: center\">投票</span>\n                </div>\n            </van-col>\n        </van-row>\n        <hr style=\"height: 5px\">\n        <van-cell-group>\n            <div class=\"d-flex bd-highlight\">\n                <div class=\"p-2 w-100 bd-highlight d-flex\">\n                    <img src=\"../assets/images/h2.png\" style=\"margin: 4px\" height=\"30\"/>\n                    <span style=\"display:block;font-weight:bold;margin-top: 6px\">客服/合作</span>\n                </div>\n                <div class=\"p-2 flex-shrink-1 bd-highlight\">\n                    <van-icon name=\"arrow\" style=\"margin-top: 10px\"/>\n                </div>\n            </div>\n        </van-cell-group>\n        <van-cell-group>\n            <div class=\"d-flex bd-highlight\">\n                <div class=\"p-2 w-100 bd-highlight d-flex\">\n                    <img src=\"../assets/images/h3.png\" style=\"margin: 4px\" height=\"30\"/>\n                    <span style=\"display:block;font-weight:bold;margin-top: 6px\">常见问题</span>\n                </div>\n                <div class=\"p-2 flex-shrink-1 bd-highlight\">\n                    <van-icon name=\"arrow\" style=\"margin-top: 10px\"/>\n                </div>\n            </div>\n        </van-cell-group>\n        <van-cell-group>\n            <div class=\"d-flex bd-highlight\">\n                <div class=\"p-2 w-100 bd-highlight d-flex\">\n                    <img src=\"../assets/images/h4.png\" style=\"margin: 4px\" height=\"30\"/>\n                    <span style=\"display:block;font-weight:bold;margin-top: 6px\">我的消息</span>\n                </div>\n                <div class=\"p-2 flex-shrink-1 bd-highlight\">\n                    <van-icon name=\"arrow\" style=\"margin-top: 10px\"/>\n                </div>\n            </div>\n        </van-cell-group>\n    </div>\n</template>\n<script>\n    export default {\n        name: 'about',\n        components: {},\n        data() {\n            return {\n                show: false,\n                showLoading:false,\n                isLogin: false,\n                loginUser: {},\n                voteNum: 0,\n                avatarList: [],\n                avatarUrl:''\n            }\n        },\n        methods: {\n            doLogout: function () {\n                if (this.isLogin) {\n                    if (sessionStorage.getItem(\"loginUser\") != null) {\n                        sessionStorage.removeItem(\"loginUser\");\n                    }\n                    if (localStorage.getItem(\"loginUser\") != null) {\n                        localStorage.removeItem(\"loginUser\");\n                    }\n                }\n                window.location.href = '/about'\n            },\n            toMyVote() {\n                window.location.href = '/myVote'\n            },\n            getVoteNum() {\n                let that = this;\n                let url =this.website+ \"/vote/getVoteNum\";\n                this.axios.get(url, {\n                    params: {\n                        creatorId: this.loginUser.id\n                    }\n                }).then(function (response) {\n                    if (response.data.code == 200) {\n                        console.log(\"查询成功\");\n                        that.voteNum = response.data.data;\n                    } else {\n                        console.log(\"查询失败\");\n                    }\n                }).catch(function (err) {\n                    // eslint-disable-next-line no-console\n                    console.log(err);\n                })\n            },\n            showPopup() {\n                this.show = true;\n            },\n            uploadAvatar() {\n                let that=this;\n                this.showLoading=true;\n                let config = {\n                    headers: { //添加请求头\n                        \"Content-Type\": \"multipart/form-data\"\n                    }\n                };\n                let uploadUrl = this.website+\"/user/uploadAvatar\";\n                let params = new FormData(); //创建form对象\n                params.append(\"file\", this.avatarList[0].file); //通过append向form对象添加数据\n                params.append(\"userId\",this.loginUser.id);\n                this.axios.post(uploadUrl, params, config).then(function (response) {\n                    if (response.data.code == 200) {\n                        console.log(\"头像上传成功\");\n                        that.show=false;\n                        that.loginUser.avatar=response.data.data;\n                    } else {\n                        console.log(\"上传失败\");\n                    }\n                }).catch(function (err) {\n                    // eslint-disable-next-line no-console\n                    console.log(err);\n                })\n            }\n        },\n        mounted() {\n            if (sessionStorage.getItem(\"loginUser\") != null || localStorage.getItem(\"loginUser\") != null) {\n                this.isLogin = true;\n                if (sessionStorage.getItem(\"loginUser\") != null) {\n                    this.loginUser = JSON.parse(sessionStorage.getItem(\"loginUser\"));\n                }\n                if (localStorage.getItem(\"loginUser\") != null) {\n                    this.loginUser = JSON.parse(localStorage.getItem(\"loginUser\"));\n                }\n            }\n            this.avatarUrl=this.imgUrl+this.loginUser.avatar;\n            this.getVoteNum();\n        }\n    }\n</script>\n<style scoped>\n    hr {\n        margin-top: 0px;\n        margin: 0;\n        border: 0;\n        color: #e0e0e0;\n        background-color: #e0e0e0;\n        height: 1px\n    }\n</style>"]}]}