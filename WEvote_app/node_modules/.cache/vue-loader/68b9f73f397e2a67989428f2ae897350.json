{"remainingRequest":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Ray\\WebstormProjects\\vote_app4\\src\\views\\About.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\src\\views\\About.vue","mtime":1577808227271},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdhYm91dCcsCiAgICBjb21wb25lbnRzOiB7fSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc2hvdzogZmFsc2UsCiAgICAgICAgICAgIHNob3dMb2FkaW5nOmZhbHNlLAogICAgICAgICAgICBpc0xvZ2luOiBmYWxzZSwKICAgICAgICAgICAgbG9naW5Vc2VyOiB7fSwKICAgICAgICAgICAgdm90ZU51bTogMCwKICAgICAgICAgICAgYXZhdGFyTGlzdDogW10sCiAgICAgICAgICAgIGF2YXRhclVybDonJwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgZG9Mb2dvdXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuaXNMb2dpbikgewogICAgICAgICAgICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCJsb2dpblVzZXIiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibG9naW5Vc2VyIikgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJsb2dpblVzZXIiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYWJvdXQnCiAgICAgICAgfSwKICAgICAgICB0b015Vm90ZSgpIHsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL215Vm90ZScKICAgICAgICB9LAogICAgICAgIGdldFZvdGVOdW0oKSB7CiAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICAgICAgbGV0IHVybCA9dGhpcy53ZWJzaXRlKyAiL3ZvdGUvZ2V0Vm90ZU51bSI7CiAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KHVybCwgewogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgY3JlYXRvcklkOiB0aGlzLmxvZ2luVXNlci5pZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi5p+l6K+i5oiQ5YqfIik7CiAgICAgICAgICAgICAgICAgICAgdGhhdC52b3RlTnVtID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi5p+l6K+i5aSx6LSlIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgc2hvd1BvcHVwKCkgewogICAgICAgICAgICB0aGlzLnNob3cgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgdXBsb2FkQXZhdGFyKCkgewogICAgICAgICAgICBsZXQgdGhhdD10aGlzOwogICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nPXRydWU7CiAgICAgICAgICAgIGxldCBjb25maWcgPSB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IC8v5re75Yqg6K+35rGC5aS0CiAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBsZXQgdXBsb2FkVXJsID0gdGhpcy53ZWJzaXRlKyIvdXNlci91cGxvYWRBdmF0YXIiOwogICAgICAgICAgICBsZXQgcGFyYW1zID0gbmV3IEZvcm1EYXRhKCk7IC8v5Yib5bu6Zm9ybeWvueixoQogICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCJmaWxlIiwgdGhpcy5hdmF0YXJMaXN0WzBdLmZpbGUpOyAvL+mAmui/h2FwcGVuZOWQkWZvcm3lr7nosaHmt7vliqDmlbDmja4KICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgidXNlcklkIix0aGlzLmxvZ2luVXNlci5pZCk7CiAgICAgICAgICAgIHRoaXMuYXhpb3MucG9zdCh1cGxvYWRVcmwsIHBhcmFtcywgY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi5aS05YOP5LiK5Lyg5oiQ5YqfIik7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5zaG93PWZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoYXQubG9naW5Vc2VyLmF2YXRhcj1yZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLkuIrkvKDlpLHotKUiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpICE9IG51bGwgfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpICE9IG51bGwpIHsKICAgICAgICAgICAgdGhpcy5pc0xvZ2luID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHRoaXMubG9naW5Vc2VyID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJsb2dpblVzZXIiKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJsb2dpblVzZXIiKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICB0aGlzLmxvZ2luVXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmF2YXRhclVybD10aGlzLmltZ1VybCt0aGlzLmxvZ2luVXNlci5hdmF0YXI7CiAgICAgICAgdGhpcy5nZXRWb3RlTnVtKCk7CiAgICB9Cn0K"},{"version":3,"sources":["About.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"About.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"about\">\n        <van-row style=\"margin: 30px;\">\n            <van-col span=\"6\" v-if=\"loginUser.avatar==null\">\n                <van-image\n                        round\n                        fit=\"none\"\n                        width=\"4.4rem\"\n                        height=\"4.4rem\"\n                        src=\"http://112.124.26.125/test/image/avatar.png\"\n                        @click=\"showPopup\"\n                />\n            </van-col>\n            <van-col span=\"6\" v-else>\n                <van-image\n                        round\n                        fit=\"none\"\n                        width=\"4.4rem\"\n                        height=\"4.4rem\"\n                        :src=avatarUrl\n                        @click=\"showPopup\"\n                />\n            </van-col>\n            <van-popup v-model=\"show\" closeable style=\"height:170px;width: 200px\">\n                <van-uploader v-model=\"avatarList\" :max-count=\"1\" style=\"margin-top: 30px;margin-left: 56px\"/>\n                <van-button v-if=\"!showLoading\" type=\"info\" @click=\"uploadAvatar\" loading-text=\"上传中...\" style=\"margin-left: 38px;width: 120px\">点击上传头像</van-button>\n                <van-button v-else type=\"info\" loading loading-text=\"上传中...\" style=\"margin-left: 38px;width: 120px\"></van-button>\n            </van-popup>\n            <van-col span=\"8\">\n                <span v-if=\"!isLogin\" style=\"display:block;margin: 20px 0px\">未登录</span>\n                <span v-else style=\"display:block;margin: 20px 0px\">{{loginUser.userName}}</span>\n            </van-col>\n            <van-col span=\"8\">\n                <van-button v-if=\"!isLogin\" color=\"linear-gradient(to right, #4bb0ff, #6149f6)\"\n                            style=\"margin: 12px 10px;width: 100px\" to=\"login\">登录/注册\n                </van-button>\n                <van-button v-else color=\"linear-gradient(to right, #4bb0ff, #6149f6)\" style=\"margin: 12px 10px\"\n                            @click=\"doLogout\">注销\n                </van-button>\n            </van-col>\n        </van-row>\n\n        <van-row type=\"flex\" justify=\"space-around\" style=\"margin-bottom: 16px\">\n            <van-col span=\"6\">\n                <div>\n                    <span style=\"display: block;font-weight:bold;text-align: center\">0</span>\n                    <span style=\"display: block;font-size: x-small;color: #969799;text-align: center\">报名</span>\n                </div>\n            </van-col>\n            <van-col span=\"6\">\n                <div @click=\"toMyVote\">\n                    <span style=\"display: block;font-weight:bold;text-align: center\">{{voteNum}}</span>\n                    <span style=\"display: block;font-size: x-small;color: #969799;text-align: center\">发起</span>\n                </div>\n            </van-col>\n            <van-col span=\"6\">\n                <div>\n                    <span style=\"display: block;font-weight:bold;text-align: center\">0</span>\n                    <span style=\"display: block;font-size: x-small;color: #969799;text-align: center\">投票</span>\n                </div>\n            </van-col>\n        </van-row>\n        <hr style=\"height: 5px\">\n        <van-cell-group>\n            <div class=\"d-flex bd-highlight\">\n                <div class=\"p-2 w-100 bd-highlight d-flex\">\n                    <img src=\"../assets/images/h2.png\" style=\"margin: 4px\" height=\"30\"/>\n                    <span style=\"display:block;font-weight:bold;margin-top: 6px\">客服/合作</span>\n                </div>\n                <div class=\"p-2 flex-shrink-1 bd-highlight\">\n                    <van-icon name=\"arrow\" style=\"margin-top: 10px\"/>\n                </div>\n            </div>\n        </van-cell-group>\n        <van-cell-group>\n            <div class=\"d-flex bd-highlight\">\n                <div class=\"p-2 w-100 bd-highlight d-flex\">\n                    <img src=\"../assets/images/h3.png\" style=\"margin: 4px\" height=\"30\"/>\n                    <span style=\"display:block;font-weight:bold;margin-top: 6px\">常见问题</span>\n                </div>\n                <div class=\"p-2 flex-shrink-1 bd-highlight\">\n                    <van-icon name=\"arrow\" style=\"margin-top: 10px\"/>\n                </div>\n            </div>\n        </van-cell-group>\n        <van-cell-group>\n            <div class=\"d-flex bd-highlight\">\n                <div class=\"p-2 w-100 bd-highlight d-flex\">\n                    <img src=\"../assets/images/h4.png\" style=\"margin: 4px\" height=\"30\"/>\n                    <span style=\"display:block;font-weight:bold;margin-top: 6px\">我的消息</span>\n                </div>\n                <div class=\"p-2 flex-shrink-1 bd-highlight\">\n                    <van-icon name=\"arrow\" style=\"margin-top: 10px\"/>\n                </div>\n            </div>\n        </van-cell-group>\n    </div>\n</template>\n<script>\n    export default {\n        name: 'about',\n        components: {},\n        data() {\n            return {\n                show: false,\n                showLoading:false,\n                isLogin: false,\n                loginUser: {},\n                voteNum: 0,\n                avatarList: [],\n                avatarUrl:''\n            }\n        },\n        methods: {\n            doLogout: function () {\n                if (this.isLogin) {\n                    if (sessionStorage.getItem(\"loginUser\") != null) {\n                        sessionStorage.removeItem(\"loginUser\");\n                    }\n                    if (localStorage.getItem(\"loginUser\") != null) {\n                        localStorage.removeItem(\"loginUser\");\n                    }\n                }\n                window.location.href = '/about'\n            },\n            toMyVote() {\n                window.location.href = '/myVote'\n            },\n            getVoteNum() {\n                let that = this;\n                let url =this.website+ \"/vote/getVoteNum\";\n                this.axios.get(url, {\n                    params: {\n                        creatorId: this.loginUser.id\n                    }\n                }).then(function (response) {\n                    if (response.data.code == 200) {\n                        console.log(\"查询成功\");\n                        that.voteNum = response.data.data;\n                    } else {\n                        console.log(\"查询失败\");\n                    }\n                }).catch(function (err) {\n                    // eslint-disable-next-line no-console\n                    console.log(err);\n                })\n            },\n            showPopup() {\n                this.show = true;\n            },\n            uploadAvatar() {\n                let that=this;\n                this.showLoading=true;\n                let config = {\n                    headers: { //添加请求头\n                        \"Content-Type\": \"multipart/form-data\"\n                    }\n                };\n                let uploadUrl = this.website+\"/user/uploadAvatar\";\n                let params = new FormData(); //创建form对象\n                params.append(\"file\", this.avatarList[0].file); //通过append向form对象添加数据\n                params.append(\"userId\",this.loginUser.id);\n                this.axios.post(uploadUrl, params, config).then(function (response) {\n                    if (response.data.code == 200) {\n                        console.log(\"头像上传成功\");\n                        that.show=false;\n                        that.loginUser.avatar=response.data.data;\n                    } else {\n                        console.log(\"上传失败\");\n                    }\n                }).catch(function (err) {\n                    // eslint-disable-next-line no-console\n                    console.log(err);\n                })\n            }\n        },\n        mounted() {\n            if (sessionStorage.getItem(\"loginUser\") != null || localStorage.getItem(\"loginUser\") != null) {\n                this.isLogin = true;\n                if (sessionStorage.getItem(\"loginUser\") != null) {\n                    this.loginUser = JSON.parse(sessionStorage.getItem(\"loginUser\"));\n                }\n                if (localStorage.getItem(\"loginUser\") != null) {\n                    this.loginUser = JSON.parse(localStorage.getItem(\"loginUser\"));\n                }\n            }\n            this.avatarUrl=this.imgUrl+this.loginUser.avatar;\n            this.getVoteNum();\n        }\n    }\n</script>\n<style scoped>\n    hr {\n        margin-top: 0px;\n        margin: 0;\n        border: 0;\n        color: #e0e0e0;\n        background-color: #e0e0e0;\n        height: 1px\n    }\n</style>"]}]}