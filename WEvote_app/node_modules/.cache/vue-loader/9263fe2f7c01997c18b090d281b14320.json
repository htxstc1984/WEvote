{"remainingRequest":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Ray\\WebstormProjects\\vote_app4\\src\\views\\newImageVote.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\src\\views\\newImageVote.vue","mtime":1577779588822},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJuZXdJbWFnZVZvdGUiLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpc0xvZ2luOiBmYWxzZSwKICAgICAgICAgICAgbG9naW5Vc2VyOiB7fSwKICAgICAgICAgICAgdGltZVNob3cxOiBmYWxzZSwKICAgICAgICAgICAgdGltZVNob3cyOiBmYWxzZSwKICAgICAgICAgICAgdm90ZVRpbHRlOiAnJywKICAgICAgICAgICAgb3B0aW9uTGlzdDogW3sKICAgICAgICAgICAgICAgIGltZzogW10sCiAgICAgICAgICAgICAgICBjb250ZW50OiAnJwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBpbWc6IFtdLAogICAgICAgICAgICAgICAgY29udGVudDogJycKICAgICAgICAgICAgfQogICAgICAgICAgICBdLAogICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgICAgIC8v566A5LuL5Zu+54mHCiAgICAgICAgICAgIGRlc2NyaXB0aW9uSW1nTGlzdDogW10sCiAgICAgICAgICAgIC8v5YiG5Lqr5Zu+54mHCiAgICAgICAgICAgIHNoYXJlSW1nOiBbXSwKICAgICAgICAgICAgbWF4Vm90ZTogJycsCiAgICAgICAgICAgIHRpbWVTZXQ6IHsKICAgICAgICAgICAgICAgIG1pbkRhdGU6IG5ldyBEYXRlKCksCiAgICAgICAgICAgICAgICBtYXhEYXRlOiBuZXcgRGF0ZSgyMTAwLCAxMSwgMzEpLAogICAgICAgICAgICAgICAgY3VycmVudERhdGU6IG5ldyBEYXRlKCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgpLmZvcm1hdCgieXl5eS1NTS1kZCBoaDptbSIpLAogICAgICAgICAgICBkZWFkbGluZTogJycsCiAgICAgICAgICAgIG5ld1ZvdGU6IHt9LAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CgogICAgICAgIC8vIGFmdGVyUmVhZChmaWxlKSB7CiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGZpbGUpCiAgICAgICAgLy8gfSwKICAgICAgICAvLyB0ZXN0KCl7CiAgICAgICAgLy8gICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgLy8gICAgICAgICBtZXNzYWdlOiAn5Zu+54mH5LiK5Lyg5aSx6LSlJywKICAgICAgICAvLyAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgLy8gICAgIH0pOwogICAgICAgIC8vIH0sCiAgICAgICAgY3JlYXRlVm90ZTogYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAodGhpcy52b3RlVGlsdGUgPT0gJycpIHsKICAgICAgICAgICAgICAgIHRoaXMuJGRpYWxvZy5hbGVydCh7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+Whq+WGmeagh+mimCcKICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgIC8vIG9uIGNsb3NlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbkxpc3QubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuJGRpYWxvZy5hbGVydCh7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+iHs+Wwkea3u+WKoOS4gOS4qumAiemhuScKICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgIC8vIG9uIGNsb3NlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5vcHRpb25MaXN0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9uTGlzdFtpXS5pbWdbMF0gPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRkaWFsb2cuYWxlcnQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+S4iuS8oOmAiemhueWbvueJhycKICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiBjbG9zZQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25MaXN0W2ldLmNvbnRlbnQgPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGlhbG9nLmFsZXJ0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7floavlhpnmoIfpopjpgInpobnlhoXlrrknCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24gY2xvc2UKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL+ajgOafpeagh+mimOWUr+S4gOaApwogICAgICAgICAgICAgICAgbGV0IGlzRXhpc3Q9YXdhaXQgdGhpcy5jaGVja1RpdGxlKHRoaXMudm90ZVRpbHRlKTsKICAgICAgICAgICAgICAgIGlmIChpc0V4aXN0ID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIuagh+mimOW3suWtmOWcqCIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJGRpYWxvZy5hbGVydCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfor6XmoIfpopjlt7LlrZjlnKgnCiAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIGNsb3NlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QubG9hZGluZyh7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIm+W7uuS4rS4uLicsCiAgICAgICAgICAgICAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGxldCBpc1VwbG9hZCA9IHRydWU7CiAgICAgICAgICAgICAgICBsZXQgaXNDcmVhdGVWb3RlID0gZmFsc2U7CiAgICAgICAgICAgICAgICBsZXQgaXNTYXZlT3B0aW9uID0gZmFsc2U7CiAgICAgICAgICAgICAgICAvL+WwhuacgOWkp+aKleelqOaVsOm7mOiupOe9ruS4ujEKICAgICAgICAgICAgICAgIGlmICh0aGlzLm1heFZvdGUgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMubWF4Vm90ZSA9IDE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsZXQgdm90ZSA9IHsKICAgICAgICAgICAgICAgICAgICBjcmVhdG9yOiB0aGlzLmxvZ2luVXNlciwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy52b3RlVGlsdGUsCiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25JbWc6ICIiLAogICAgICAgICAgICAgICAgICAgIHNoYXJlSW1nOiAiIiwKICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWU6IHRoaXMuc3RhcnRUaW1lLAogICAgICAgICAgICAgICAgICAgIGRlYWRsaW5lOiB0aGlzLmRlYWRsaW5lLAogICAgICAgICAgICAgICAgICAgIG9uY2VNYXhWb3RlOiB0aGlzLm1heFZvdGUsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgLy/kuIrkvKDlm77niYcKICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uSW1nTGlzdFswXSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgLy/lkIzmraXmiafooYwg6ZyA562J5b6F5paH5Lu25LiK5Lyg5a6M5q+VCiAgICAgICAgICAgICAgICAgICAgdm90ZS5kZXNjcmlwdGlvbkltZyA9IGF3YWl0IHRoaXMudXBsb2FkSW1nKHRoaXMuZGVzY3JpcHRpb25JbWdMaXN0WzBdKTsKICAgICAgICAgICAgICAgICAgICBpZiAodm90ZS5kZXNjcmlwdGlvbkltZyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzVXBsb2FkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hhcmVJbWdbMF0gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHZvdGUuc2hhcmVJbWcgPSBhd2FpdCB0aGlzLnVwbG9hZEltZyh0aGlzLnNoYXJlSW1nWzBdKTsKICAgICAgICAgICAgICAgICAgICBpZiAodm90ZS5zaGFyZUltZyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzVXBsb2FkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codm90ZSkKICAgICAgICAgICAgICAgIC8v5L+d5a2Y5oqV56Wo5L+h5oGvCiAgICAgICAgICAgICAgICBpc0NyZWF0ZVZvdGU9YXdhaXQgdGhpcy5zYXZlVm90ZSh2b3RlKTsKICAgICAgICAgICAgICAgIC8v5L+d5a2Y6YCJ6aG55L+h5oGvCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMub3B0aW9uTGlzdCkgewogICAgICAgICAgICAgICAgICAgIGxldCBpbWdOYW1lID0gYXdhaXQgdGhpcy51cGxvYWRJbWcodGhpcy5vcHRpb25MaXN0W2ldLmltZ1swXSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGltZ05hbWUgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBpc1VwbG9hZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpc1NhdmVPcHRpb249YXdhaXQgdGhpcy5zYXZlT3B0aW9uKGltZ05hbWUsaSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChpc1VwbG9hZCA9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0LmNsZWFyKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+WbvueJh+S4iuS8oOWksei0pScsCiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzQ3JlYXRlVm90ZSA9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0LmNsZWFyKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+aKleelqOWIm+W7uuWksei0pScsCiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzU2F2ZU9wdGlvbiA9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0LmNsZWFyKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+mAiemhueS/neWtmOWksei0pScsCiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0LmNsZWFyKCk7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL215Vm90ZSc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNoZWNrVGl0bGU6YXN5bmMgZnVuY3Rpb24odGlsdGUpewogICAgICAgICAgICBsZXQgaXNFeGlzdD1mYWxzZTsKICAgICAgICAgICAgbGV0IGNoZWNrVXJsID0gdGhpcy53ZWJzaXRlICsgIi92b3RlL2NoZWNrVGl0bGUiOwogICAgICAgICAgICBhd2FpdCB0aGlzLmF4aW9zLmdldChjaGVja1VybCwgewogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgdm90ZVRpdGxlOiB0aWx0ZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBpc0V4aXN0ID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi5qOA5p+l6L+H56iL5Ye66ZSZIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGlzRXhpc3Q7CiAgICAgICAgfSwKICAgICAgICBzYXZlVm90ZTphc3luYyBmdW5jdGlvbih2b3RlKXsKICAgICAgICAgICAgbGV0IGlzQ3JlYXRlVm90ZT1mYWxzZTsKICAgICAgICAgICAgbGV0IHRoYXQ9dGhpczsKICAgICAgICAgICAgbGV0IGNyZWF0ZVZvdGVVcmwgPSB0aGlzLndlYnNpdGUgKyAiL3ZvdGUvY3JlYXRlVm90ZSI7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXhpb3MucG9zdChjcmVhdGVWb3RlVXJsLCB2b3RlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICB0aGF0Lm5ld1ZvdGUgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIuWIm+W7uuaKleelqOaIkOWKnyIpOwogICAgICAgICAgICAgICAgICAgIGlzQ3JlYXRlVm90ZSA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLliJvlu7rlpLHotKUiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gaXNDcmVhdGVWb3RlOwogICAgICAgIH0sCiAgICAgICAgc2F2ZU9wdGlvbjphc3luYyBmdW5jdGlvbihpbWdOYW1lLGkpewogICAgICAgICAgICBsZXQgaXNTYXZlT3B0aW9uPWZhbHNlOwogICAgICAgICAgICBsZXQgc2F2ZU9wdGlvblVybCA9IHRoaXMud2Vic2l0ZSArICIvb3B0aW9uL3NhdmVPcHRpb24iOwogICAgICAgICAgICBhd2FpdCB0aGlzLmF4aW9zLnBvc3Qoc2F2ZU9wdGlvblVybCwgewogICAgICAgICAgICAgICAgaW1nOiBpbWdOYW1lLAogICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5vcHRpb25MaXN0W2ldLmNvbnRlbnQsCiAgICAgICAgICAgICAgICB2b3RlOiB0aGlzLm5ld1ZvdGUsCiAgICAgICAgICAgICAgICB2b3RlczogMAogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpICsgIumAiemhuea3u+WKoOaIkOWKnyIpOwogICAgICAgICAgICAgICAgICAgIGlzU2F2ZU9wdGlvbiA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGkgKyAi6YCJ6aG55re75Yqg5aSx6LSlIik7CiAgICAgICAgICAgICAgICAgICAgaXNTYXZlT3B0aW9uID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICB9KQogICAgICAgICAgICByZXR1cm4gaXNTYXZlT3B0aW9uOwogICAgICAgIH0sCiAgICAgICAgZGVsVGFibGUoaWR4KSB7CiAgICAgICAgICAgIHRoaXMub3B0aW9uTGlzdCA9IHRoaXMub3B0aW9uTGlzdC5maWx0ZXIoKAogICAgICAgICAgICAgICAgaXRlbSwgaSkgPT4gewogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coW2l0ZW0sIGksIGlkeF0pCiAgICAgICAgICAgICAgICBpZiAoaSAhPSBpZHgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gImUiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhZGRUYWJsZSgpIHsKICAgICAgICAgICAgdGhpcy5vcHRpb25MaXN0LnB1c2goewogICAgICAgICAgICAgICAgaW1nOiBbXSwKICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBvblNob3cxKCkgewogICAgICAgICAgICB0aGlzLnRpbWVTaG93MSA9IHRydWUKICAgICAgICB9LAogICAgICAgIG9uU2hvdzIoKSB7CiAgICAgICAgICAgIHRoaXMudGltZVNob3cyID0gdHJ1ZQogICAgICAgIH0sCiAgICAgICAgY29uZmlybVRpbWUxKHZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdmFsdWUuZm9ybWF0KCJ5eXl5LU1NLWRkIGhoOm1tIikKICAgICAgICAgICAgdGhpcy50aW1lU2hvdzEgPSBmYWxzZQogICAgICAgIH0sCiAgICAgICAgY29uZmlybVRpbWUyKHZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMuZGVhZGxpbmUgPSB2YWx1ZS5mb3JtYXQoInl5eXktTU0tZGQgaGg6bW0iKQogICAgICAgICAgICB0aGlzLnRpbWVTaG93MiA9IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBjYW5jZWxUaW1lKCkgewogICAgICAgICAgICB0aGlzLnRpbWVTaG93MSA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMudGltZVNob3cyID0gZmFsc2UKICAgICAgICB9LAogICAgICAgIGZvcm1hdHRlcih0eXBlLCB2YWx1ZSkgewogICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3llYXInKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYCR7dmFsdWV95bm0YDsKICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnbW9udGgnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYCR7dmFsdWV95pyIYAogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdkYXknKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYCR7dmFsdWV95pelYAogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdob3VyJykgewogICAgICAgICAgICAgICAgcmV0dXJuIGAke3ZhbHVlfeaXtmAKICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnbWludXRlJykgewogICAgICAgICAgICAgICAgcmV0dXJuIGAke3ZhbHVlfeWIhmAKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfSwKICAgICAgICB1cGxvYWRJbWc6IGFzeW5jIGZ1bmN0aW9uIChpbWdGaWxlKSB7CiAgICAgICAgICAgIC8vIGxldCB0aGF0PXRoaXM7CiAgICAgICAgICAgIGxldCBpbWdOYW1lID0gaW1nRmlsZS5maWxlLm5hbWU7CiAgICAgICAgICAgIGxldCBjb25maWcgPSB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IC8v5re75Yqg6K+35rGC5aS0CiAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBsZXQgdXBsb2FkVXJsID0gdGhpcy53ZWJzaXRlICsgIi9jb21tb25zL3VwbG9hZCI7CiAgICAgICAgICAgIGxldCBwYXJhbXMgPSBuZXcgRm9ybURhdGEoKTsgLy/liJvlu7pmb3Jt5a+56LGhCiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoImZpbGUiLCBpbWdGaWxlLmZpbGUpOyAvL+mAmui/h2FwcGVuZOWQkWZvcm3lr7nosaHmt7vliqDmlbDmja4vL+esrOS4gOS4quWPguaVsOWtl+espuS4suWPr+S7peWhq+S7u+aEj+WRveWQje+8jOesrOS6jOS4quagueaNruWvueixoeWxnuaAp+adpeaJvuWIsGZpbGUKICAgICAgICAgICAgYXdhaXQgdGhpcy5heGlvcy5wb3N0KHVwbG9hZFVybCwgcGFyYW1zLCBjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIC8vIGlmKGltZ0ZpbGU9PXRoYXQuZGVzY3JpcHRpb25JbWdMaXN0WzBdKXsKICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhhdC5kZXNjcmlwdGlvbkltZ05hbWU9cmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyBjb25zb2xlLmxvZyh0aGF0LmRlc2NyaXB0aW9uSW1nTmFtZSkKICAgICAgICAgICAgICAgICAgICAvLyB9ZWxzZSBpZihpbWdGaWxlPT10aGF0LnNoYXJlSW1nWzBdKXsKICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhhdC5zaGFyZUltZ05hbWU9cmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyBjb25zb2xlLmxvZyh0aGF0LnNoYXJlSW1nTmFtZSkKICAgICAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaW1nTmFtZSArICLlm77niYfkuIrkvKDmiJDlip8iKTsKICAgICAgICAgICAgICAgICAgICBpbWdOYW1lID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi5LiK5Lyg5aSx6LSlIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICB9KQogICAgICAgICAgICByZXR1cm4gaW1nTmFtZTsKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgNykKICAgICAgICB0aGlzLmRlYWRsaW5lID0gZGF0ZS5mb3JtYXQoInl5eXktTU0tZGQgaGg6bW0iKQogICAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJsb2dpblVzZXIiKSAhPSBudWxsIHx8IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJsb2dpblVzZXIiKSAhPSBudWxsKSB7CiAgICAgICAgICAgIHRoaXMuaXNMb2dpbiA9IHRydWU7CiAgICAgICAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJsb2dpblVzZXIiKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICB0aGlzLmxvZ2luVXNlciA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgibG9naW5Vc2VyIikpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibG9naW5Vc2VyIikgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhpcy5sb2dpblVzZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJsb2dpblVzZXIiKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KRGF0ZS5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKGZtdCkgewogICAgdmFyIG8gPSB7CiAgICAgICAgIk0rIjogdGhpcy5nZXRNb250aCgpICsgMSwgICAgICAgICAgICAgICAgIC8v5pyI5Lu9CiAgICAgICAgImQrIjogdGhpcy5nZXREYXRlKCksICAgICAgICAgICAgICAgICAgICAvL+aXpQogICAgICAgICJoKyI6IHRoaXMuZ2V0SG91cnMoKSwgICAgICAgICAgICAgICAgICAgLy/lsI/ml7YKICAgICAgICAibSsiOiB0aGlzLmdldE1pbnV0ZXMoKSwgICAgICAgICAgICAgICAgIC8v5YiGCiAgICAgICAgInMrIjogdGhpcy5nZXRTZWNvbmRzKCksICAgICAgICAgICAgICAgICAvL+enkgogICAgICAgICJxKyI6IE1hdGguZmxvb3IoKHRoaXMuZ2V0TW9udGgoKSArIDMpIC8gMyksIC8v5a2j5bqmCiAgICAgICAgIlMiOiB0aGlzLmdldE1pbGxpc2Vjb25kcygpICAgICAgICAgICAgIC8v5q+r56eSCiAgICB9OwoKICAgIGlmICgvKHkrKS8udGVzdChmbXQpKSB7CiAgICAgICAgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCAodGhpcy5nZXRGdWxsWWVhcigpICsgIiIpLnN1YnN0cig0IC0gUmVnRXhwLiQxLmxlbmd0aCkpOwogICAgfQoKICAgIGZvciAodmFyIGsgaW4gbykgewogICAgICAgIGlmIChuZXcgUmVnRXhwKCIoIiArIGsgKyAiKSIpLnRlc3QoZm10KSkgewogICAgICAgICAgICBmbXQgPSBmbXQucmVwbGFjZSgKICAgICAgICAgICAgICAgIFJlZ0V4cC4kMSwgKFJlZ0V4cC4kMS5sZW5ndGggPT0gMSkgPyAob1trXSkgOiAoKCIwMCIgKyBvW2tdKS5zdWJzdHIoKCIiICsgb1trXSkubGVuZ3RoKSkpOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBmbXQ7Cn0KCg=="},{"version":3,"sources":["newImageVote.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"newImageVote.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div style=\"margin-bottom: 100px\">\r\n        <van-cell-group>\r\n            <van-field v-model=\"voteTilte\" placeholder=\"投票标题\"/>\r\n            <van-field\r\n                    v-model=\"description\"\r\n                    rows=\"4\"\r\n                    type=\"textarea\"\r\n                    placeholder=\"请输入描述（图片可选）\"\r\n                    show-word-limit\r\n            />\r\n        </van-cell-group>\r\n        <van-uploader v-model=\"descriptionImgList\" :max-count=\"1\" multiple\r\n                      style=\"margin: 8px 8px\"/>\r\n        <hr style=\"height: 7px\">\r\n        <van-cell-group v-for=\"(item,i) in optionList\" :key=\"i\">\r\n            <van-row>\r\n                <van-col span=\"2\">\r\n                    <img src=\"../assets/images/del.png\" style=\"margin:12px 5px;\" height=\"24px\" width=\"24px\"\r\n                         @click=\"delTable(i)\">\r\n                </van-col>\r\n                <van-col span=\"3\">\r\n                    <van-uploader v-model=\"item.img\" preview-size=\"42px\" :max-count=\"1\" multiple\r\n                                  style=\"margin-top: 5px\"/>\r\n                </van-col>\r\n                <van-col span=\"19\">\r\n                    <van-field v-model=\"item.content\" placeholder=\"选项内容\" style=\"margin-top: 5px\"/>\r\n                </van-col>\r\n            </van-row>\r\n        </van-cell-group>\r\n        <van-row>\r\n            <van-col span=\"2\">\r\n                <img src=\"../assets/images/add.png\" style=\"margin:12px 5px;\" height=\"24px\" width=\"24px\"\r\n                     @click=\"addTable()\">\r\n            </van-col>\r\n            <van-col span=\"22\">\r\n                <span style=\"color: #2a89ff;display: block;margin-top: 10px\" @click=\"addTable()\">添加选项</span>\r\n            </van-col>\r\n        </van-row>\r\n        <hr style=\"height: 7px\">\r\n        <van-cell-group>\r\n            <van-field v-model=\"maxVote\" placeholder=\"每人最多可投(默认为1)\" type=\"number\"/>\r\n            <van-row>\r\n                <van-col span=\"21\">\r\n                    <span style=\"display: block;margin: 14px 16px\">自定义分享图（选填）</span>\r\n                </van-col>\r\n                <van-col span=\"3\">\r\n                    <van-uploader v-model=\"shareImg\" preview-size=\"42px\" :max-count=\"1\" multiple\r\n                                  style=\"margin-top: 5px\"/>\r\n                </van-col>\r\n            </van-row>\r\n        </van-cell-group>\r\n        <van-cell-group>\r\n            <van-row>\r\n                <van-col span=\"16\">\r\n                    <span style=\"display: block;margin: 14px 16px\">开始时间</span>\r\n                </van-col>\r\n                <van-col span=\"8\">\r\n                    <span @click=\"onShow1\" style=\"display: block;margin-top: 14px\">{{startTime}}</span>\r\n                </van-col>\r\n            </van-row>\r\n        </van-cell-group>\r\n        <van-cell-group>\r\n            <van-row>\r\n                <van-col span=\"16\">\r\n                    <span style=\"display: block;margin: 14px 16px\">截止时间</span>\r\n                </van-col>\r\n                <van-col span=\"8\">\r\n                    <span @click=\"onShow2\" style=\"display: block;margin-top: 14px\">{{deadline}}</span>\r\n                </van-col>\r\n            </van-row>\r\n        </van-cell-group>\r\n        <van-action-sheet v-model=\"timeShow1\">\r\n            <van-datetime-picker\r\n                    v-model=\"timeSet.currentDate\"\r\n                    type=\"datetime\"\r\n                    :min-date=\"timeSet.minDate\"\r\n                    :max-date=\"timeSet.maxDate\"\r\n                    :formatter=\"formatter\"\r\n                    @confirm=\"confirmTime1\"\r\n                    @cancel=\"cancelTime\"\r\n            />\r\n        </van-action-sheet>\r\n        <van-action-sheet v-model=\"timeShow2\">\r\n            <van-datetime-picker\r\n                    v-model=\"timeSet.currentDate\"\r\n                    type=\"datetime\"\r\n                    :min-date=\"timeSet.minDate\"\r\n                    :max-date=\"timeSet.maxDate\"\r\n                    :formatter=\"formatter\"\r\n                    @confirm=\"confirmTime2\"\r\n                    @cancel=\"cancelTime\"\r\n            />\r\n        </van-action-sheet>\r\n        <div class=\"d-flex justify-content-center\">\r\n            <button type=\"button\" class=\"btn btn-primary\" style=\"margin-top: 20px\" @click=\"createVote\">立即发起投票</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"newImageVote\",\r\n        data() {\r\n            return {\r\n                isLogin: false,\r\n                loginUser: {},\r\n                timeShow1: false,\r\n                timeShow2: false,\r\n                voteTilte: '',\r\n                optionList: [{\r\n                    img: [],\r\n                    content: ''\r\n                }, {\r\n                    img: [],\r\n                    content: ''\r\n                }\r\n                ],\r\n                description: '',\r\n                //简介图片\r\n                descriptionImgList: [],\r\n                //分享图片\r\n                shareImg: [],\r\n                maxVote: '',\r\n                timeSet: {\r\n                    minDate: new Date(),\r\n                    maxDate: new Date(2100, 11, 31),\r\n                    currentDate: new Date()\r\n                },\r\n                startTime: new Date().format(\"yyyy-MM-dd hh:mm\"),\r\n                deadline: '',\r\n                newVote: {},\r\n            }\r\n        },\r\n        methods: {\r\n\r\n            // afterRead(file) {\r\n            //     console.log(file)\r\n            // },\r\n            // test(){\r\n            //     this.$notify({\r\n            //         message: '图片上传失败',\r\n            //         duration: 1000\r\n            //     });\r\n            // },\r\n            createVote: async function () {\r\n                if (this.voteTilte == '') {\r\n                    this.$dialog.alert({\r\n                        message: '请填写标题'\r\n                    }).then(() => {\r\n                        // on close\r\n                    });\r\n                } else if (this.optionList.length == 0) {\r\n                    this.$dialog.alert({\r\n                        message: '请至少添加一个选项'\r\n                    }).then(() => {\r\n                        // on close\r\n                    });\r\n                } else {\r\n                    for (let i in this.optionList) {\r\n                        if (this.optionList[i].img[0] == null) {\r\n                            this.$dialog.alert({\r\n                                message: '请上传选项图片'\r\n                            }).then(() => {\r\n                                // on close\r\n                            });\r\n                            return;\r\n                        } else if (this.optionList[i].content == '') {\r\n                            this.$dialog.alert({\r\n                                message: '请填写标题选项内容'\r\n                            }).then(() => {\r\n                                // on close\r\n                            });\r\n                            return;\r\n                        }\r\n                    }\r\n                    //检查标题唯一性\r\n                    let isExist=await this.checkTitle(this.voteTilte);\r\n                    if (isExist == false) {\r\n                        console.log(\"标题已存在\");\r\n                        this.$dialog.alert({\r\n                            message: '该标题已存在'\r\n                        }).then(() => {\r\n                            // on close\r\n                        });\r\n                        return;\r\n                    }\r\n                    this.$toast.loading({\r\n                        message: '创建中...',\r\n                        forbidClick: true,\r\n                        duration: 0,\r\n                    });\r\n                    let isUpload = true;\r\n                    let isCreateVote = false;\r\n                    let isSaveOption = false;\r\n                    //将最大投票数默认置为1\r\n                    if (this.maxVote == null) {\r\n                        this.maxVote = 1;\r\n                    }\r\n                    let vote = {\r\n                        creator: this.loginUser,\r\n                        title: this.voteTilte,\r\n                        description: this.description,\r\n                        descriptionImg: \"\",\r\n                        shareImg: \"\",\r\n                        startTime: this.startTime,\r\n                        deadline: this.deadline,\r\n                        onceMaxVote: this.maxVote,\r\n                    };\r\n                    //上传图片\r\n                    if (this.descriptionImgList[0] != null) {\r\n                        //同步执行 需等待文件上传完毕\r\n                        vote.descriptionImg = await this.uploadImg(this.descriptionImgList[0]);\r\n                        if (vote.descriptionImg == null) {\r\n                            isUpload = false;\r\n                        }\r\n                    }\r\n                    if (this.shareImg[0] != null) {\r\n                        vote.shareImg = await this.uploadImg(this.shareImg[0]);\r\n                        if (vote.shareImg == null) {\r\n                            isUpload = false;\r\n                        }\r\n                    }\r\n                    // console.log(vote)\r\n                    //保存投票信息\r\n                    isCreateVote=await this.saveVote(vote);\r\n                    //保存选项信息\r\n                    for (let i in this.optionList) {\r\n                        let imgName = await this.uploadImg(this.optionList[i].img[0]);\r\n                        if (imgName == null) {\r\n                            isUpload = false;\r\n                        }\r\n                        isSaveOption=await this.saveOption(imgName,i)\r\n                    }\r\n                    if (isUpload == false) {\r\n                        this.$toast.clear();\r\n                        this.$notify({\r\n                            message: '图片上传失败',\r\n                            duration: 1000\r\n                        });\r\n                    } else if (isCreateVote == false) {\r\n                        this.$toast.clear();\r\n                        this.$notify({\r\n                            message: '投票创建失败',\r\n                            duration: 1000\r\n                        });\r\n                    } else if (isSaveOption == false) {\r\n                        this.$toast.clear();\r\n                        this.$notify({\r\n                            message: '选项保存失败',\r\n                            duration: 1000\r\n                        });\r\n                    } else {\r\n                        this.$toast.clear();\r\n                        window.location.href = '/myVote';\r\n                    }\r\n                }\r\n            },\r\n            checkTitle:async function(tilte){\r\n                let isExist=false;\r\n                let checkUrl = this.website + \"/vote/checkTitle\";\r\n                await this.axios.get(checkUrl, {\r\n                    params: {\r\n                        voteTitle: tilte\r\n                    }\r\n                }).then(function (response) {\r\n                    if (response.data.code == 200) {\r\n                        isExist = response.data.data;\r\n                    } else {\r\n                        console.log(\"检查过程出错\");\r\n                    }\r\n                }).catch(function (err) {\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(err);\r\n                });\r\n                return isExist;\r\n            },\r\n            saveVote:async function(vote){\r\n                let isCreateVote=false;\r\n                let that=this;\r\n                let createVoteUrl = this.website + \"/vote/createVote\";\r\n                await this.axios.post(createVoteUrl, vote).then(function (response) {\r\n                    if (response.data.code == 200) {\r\n                        that.newVote = response.data.data;\r\n                        console.log(\"创建投票成功\");\r\n                        isCreateVote = true;\r\n                    } else {\r\n                        console.log(\"创建失败\");\r\n                    }\r\n                }).catch(function (err) {\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(err);\r\n                });\r\n                return isCreateVote;\r\n            },\r\n            saveOption:async function(imgName,i){\r\n                let isSaveOption=false;\r\n                let saveOptionUrl = this.website + \"/option/saveOption\";\r\n                await this.axios.post(saveOptionUrl, {\r\n                    img: imgName,\r\n                    content: this.optionList[i].content,\r\n                    vote: this.newVote,\r\n                    votes: 0\r\n                }).then(function (response) {\r\n                    if (response.data.code == 200) {\r\n                        console.log(i + \"选项添加成功\");\r\n                        isSaveOption = true;\r\n                    } else {\r\n                        console.log(i + \"选项添加失败\");\r\n                        isSaveOption = false;\r\n                    }\r\n                }).catch(function (err) {\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(err);\r\n                })\r\n                return isSaveOption;\r\n            },\r\n            delTable(idx) {\r\n                this.optionList = this.optionList.filter((\r\n                    item, i) => {\r\n                    // console.log([item, i, idx])\r\n                    if (i != idx) {\r\n                        return \"e\"\r\n                    }\r\n                })\r\n            },\r\n            addTable() {\r\n                this.optionList.push({\r\n                    img: [],\r\n                    content: ''\r\n                })\r\n            },\r\n            onShow1() {\r\n                this.timeShow1 = true\r\n            },\r\n            onShow2() {\r\n                this.timeShow2 = true\r\n            },\r\n            confirmTime1(value) {\r\n                this.startTime = value.format(\"yyyy-MM-dd hh:mm\")\r\n                this.timeShow1 = false\r\n            },\r\n            confirmTime2(value) {\r\n                this.deadline = value.format(\"yyyy-MM-dd hh:mm\")\r\n                this.timeShow2 = false\r\n            },\r\n            cancelTime() {\r\n                this.timeShow1 = false\r\n                this.timeShow2 = false\r\n            },\r\n            formatter(type, value) {\r\n                if (type === 'year') {\r\n                    return `${value}年`;\r\n                } else if (type === 'month') {\r\n                    return `${value}月`\r\n                } else if (type === 'day') {\r\n                    return `${value}日`\r\n                } else if (type === 'hour') {\r\n                    return `${value}时`\r\n                } else if (type === 'minute') {\r\n                    return `${value}分`\r\n                }\r\n                return value;\r\n            },\r\n            uploadImg: async function (imgFile) {\r\n                // let that=this;\r\n                let imgName = imgFile.file.name;\r\n                let config = {\r\n                    headers: { //添加请求头\r\n                        \"Content-Type\": \"multipart/form-data\"\r\n                    }\r\n                };\r\n                let uploadUrl = this.website + \"/commons/upload\";\r\n                let params = new FormData(); //创建form对象\r\n                params.append(\"file\", imgFile.file); //通过append向form对象添加数据//第一个参数字符串可以填任意命名，第二个根据对象属性来找到file\r\n                await this.axios.post(uploadUrl, params, config).then(function (response) {\r\n                    if (response.data.code == 200) {\r\n                        // if(imgFile==that.descriptionImgList[0]){\r\n                        //     that.descriptionImgName=response.data.data;\r\n                        //     // console.log(that.descriptionImgName)\r\n                        // }else if(imgFile==that.shareImg[0]){\r\n                        //     that.shareImgName=response.data.data;\r\n                        //     // console.log(that.shareImgName)\r\n                        // }\r\n                        console.log(imgName + \"图片上传成功\");\r\n                        imgName = response.data.data;\r\n                    } else {\r\n                        console.log(\"上传失败\");\r\n                    }\r\n                }).catch(function (err) {\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(err);\r\n                })\r\n                return imgName;\r\n            }\r\n        },\r\n        mounted() {\r\n            let date = new Date();\r\n            date.setDate(date.getDate() + 7)\r\n            this.deadline = date.format(\"yyyy-MM-dd hh:mm\")\r\n            if (sessionStorage.getItem(\"loginUser\") != null || localStorage.getItem(\"loginUser\") != null) {\r\n                this.isLogin = true;\r\n                if (sessionStorage.getItem(\"loginUser\") != null) {\r\n                    this.loginUser = JSON.parse(sessionStorage.getItem(\"loginUser\"));\r\n                }\r\n                if (localStorage.getItem(\"loginUser\") != null) {\r\n                    this.loginUser = JSON.parse(localStorage.getItem(\"loginUser\"));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    Date.prototype.format = function (fmt) {\r\n        var o = {\r\n            \"M+\": this.getMonth() + 1,                 //月份\r\n            \"d+\": this.getDate(),                    //日\r\n            \"h+\": this.getHours(),                   //小时\r\n            \"m+\": this.getMinutes(),                 //分\r\n            \"s+\": this.getSeconds(),                 //秒\r\n            \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度\r\n            \"S\": this.getMilliseconds()             //毫秒\r\n        };\r\n\r\n        if (/(y+)/.test(fmt)) {\r\n            fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n        }\r\n\r\n        for (var k in o) {\r\n            if (new RegExp(\"(\" + k + \")\").test(fmt)) {\r\n                fmt = fmt.replace(\r\n                    RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n            }\r\n        }\r\n        return fmt;\r\n    }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    hr {\r\n        margin-top: 0px;\r\n        margin: 0;\r\n        border: 0;\r\n        color: #e0e0e0;\r\n        background-color: #e0e0e0;\r\n        height: 1px\r\n    }\r\n</style>"]}]}