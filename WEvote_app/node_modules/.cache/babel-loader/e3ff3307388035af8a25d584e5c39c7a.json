{"remainingRequest":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Ray\\WebstormProjects\\vote_app4\\src\\views\\About.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\src\\views\\About.vue","mtime":1577812697764},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ray\\WebstormProjects\\vote_app4\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdhYm91dCcsCiAgY29tcG9uZW50czoge30sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3c6IGZhbHNlLAogICAgICBzaG93TG9hZGluZzogZmFsc2UsCiAgICAgIGlzTG9naW46IGZhbHNlLAogICAgICBsb2dpblVzZXI6IHt9LAogICAgICB2b3RlTnVtOiAwLAogICAgICBhdmF0YXJMaXN0OiBbXSwKICAgICAgYXZhdGFyVXJsOiAnJwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGRvTG9nb3V0OiBmdW5jdGlvbiBkb0xvZ291dCgpIHsKICAgICAgaWYgKHRoaXMuaXNMb2dpbikgewogICAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJsb2dpblVzZXIiKSAhPSBudWxsKSB7CiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCJsb2dpblVzZXIiKTsKICAgICAgICB9CgogICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibG9naW5Vc2VyIikgIT0gbnVsbCkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImxvZ2luVXNlciIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2Fib3V0JzsKICAgIH0sCiAgICB0b015Vm90ZTogZnVuY3Rpb24gdG9NeVZvdGUoKSB7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9teVZvdGUnOwogICAgfSwKICAgIGdldFZvdGVOdW06IGZ1bmN0aW9uIGdldFZvdGVOdW0oKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdmFyIHVybCA9IHRoaXMud2Vic2l0ZSArICIvdm90ZS9nZXRWb3RlTnVtIjsKICAgICAgdGhpcy5heGlvcy5nZXQodXJsLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBjcmVhdG9ySWQ6IHRoaXMubG9naW5Vc2VyLmlkCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKCLmn6Xor6LmiJDlip8iKTsKICAgICAgICAgIHRoYXQudm90ZU51bSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICB9IGVsc2Ugey8vY29uc29sZS5sb2coIuafpeivouWksei0pSIpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgey8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgLy9jb25zb2xlLmxvZyggKTsKICAgICAgfSk7CiAgICB9LAogICAgc2hvd1BvcHVwOiBmdW5jdGlvbiBzaG93UG9wdXAoKSB7CiAgICAgIHRoaXMuc2hvdyA9IHRydWU7CiAgICB9LAogICAgdXBsb2FkQXZhdGFyOiBmdW5jdGlvbiB1cGxvYWRBdmF0YXIoKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgLy/mt7vliqDor7fmsYLlpLQKICAgICAgICAgICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIKICAgICAgICB9CiAgICAgIH07CiAgICAgIHZhciB1cGxvYWRVcmwgPSB0aGlzLndlYnNpdGUgKyAiL3VzZXIvdXBsb2FkQXZhdGFyIjsKICAgICAgdmFyIHBhcmFtcyA9IG5ldyBGb3JtRGF0YSgpOyAvL+WIm+W7umZvcm3lr7nosaEKCiAgICAgIHBhcmFtcy5hcHBlbmQoImZpbGUiLCB0aGlzLmF2YXRhckxpc3RbMF0uZmlsZSk7IC8v6YCa6L+HYXBwZW5k5ZCRZm9ybeWvueixoea3u+WKoOaVsOaNrgoKICAgICAgcGFyYW1zLmFwcGVuZCgidXNlcklkIiwgdGhpcy5sb2dpblVzZXIuaWQpOwogICAgICB0aGlzLmF4aW9zLnBvc3QodXBsb2FkVXJsLCBwYXJhbXMsIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09IDIwMCkgewogICAgICAgICAgLy9jb25zb2xlLmxvZygi5aS05YOP5LiK5Lyg5oiQ5YqfIik7CiAgICAgICAgICB0aGF0LnNob3cgPSBmYWxzZTsKICAgICAgICAgIHRoYXQubG9naW5Vc2VyLmF2YXRhciA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICB9IGVsc2Ugey8vY29uc29sZS5sb2coIuS4iuS8oOWksei0pSIpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgey8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgLy9jb25zb2xlLmxvZyggKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpICE9IG51bGwgfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpICE9IG51bGwpIHsKICAgICAgdGhpcy5pc0xvZ2luID0gdHJ1ZTsKCiAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJsb2dpblVzZXIiKSAhPSBudWxsKSB7CiAgICAgICAgdGhpcy5sb2dpblVzZXIgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImxvZ2luVXNlciIpKTsKICAgICAgfQoKICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJsb2dpblVzZXIiKSAhPSBudWxsKSB7CiAgICAgICAgdGhpcy5sb2dpblVzZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJsb2dpblVzZXIiKSk7CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLmF2YXRhclVybCA9IHRoaXMuaW1nVXJsICsgdGhpcy5sb2dpblVzZXIuYXZhdGFyOwogICAgdGhpcy5nZXRWb3RlTnVtKCk7CiAgfQp9Ow=="},{"version":3,"sources":["About.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"about\">\n        <van-row style=\"margin: 30px;\">\n            <van-col span=\"6\" v-if=\"loginUser.avatar==null\">\n                <van-image\n                        round\n                        fit=\"none\"\n                        width=\"4.4rem\"\n                        height=\"4.4rem\"\n                        src=\"http://112.124.26.125/test/image/avatar.png\"\n                        @click=\"showPopup\"\n                />\n            </van-col>\n            <van-col span=\"6\" v-else>\n                <van-image\n                        round\n                        fit=\"none\"\n                        width=\"4.4rem\"\n                        height=\"4.4rem\"\n                        :src=avatarUrl\n                        @click=\"showPopup\"\n                />\n            </van-col>\n            <van-popup v-model=\"show\" closeable style=\"height:170px;width: 200px\">\n                <van-uploader v-model=\"avatarList\" :max-count=\"1\" style=\"margin-top: 30px;margin-left: 56px\"/>\n                <van-button v-if=\"!showLoading\" type=\"info\" @click=\"uploadAvatar\" loading-text=\"上传中...\" style=\"margin-left: 38px;width: 120px\">点击上传头像</van-button>\n                <van-button v-else type=\"info\" loading loading-text=\"上传中...\" style=\"margin-left: 38px;width: 120px\"></van-button>\n            </van-popup>\n            <van-col span=\"8\">\n                <span v-if=\"!isLogin\" style=\"display:block;margin: 20px 0px\">未登录</span>\n                <span v-else style=\"display:block;margin: 20px 0px\">{{loginUser.userName}}</span>\n            </van-col>\n            <van-col span=\"8\">\n                <van-button v-if=\"!isLogin\" color=\"linear-gradient(to right, #4bb0ff, #6149f6)\"\n                            style=\"margin: 12px 10px;width: 100px\" to=\"login\">登录/注册\n                </van-button>\n                <van-button v-else color=\"linear-gradient(to right, #4bb0ff, #6149f6)\" style=\"margin: 12px 10px\"\n                            @click=\"doLogout\">注销\n                </van-button>\n            </van-col>\n        </van-row>\n\n        <van-row type=\"flex\" justify=\"space-around\" style=\"margin-bottom: 16px\">\n            <van-col span=\"6\">\n                <div>\n                    <span style=\"display: block;font-weight:bold;text-align: center\">0</span>\n                    <span style=\"display: block;font-size: x-small;color: #969799;text-align: center\">报名</span>\n                </div>\n            </van-col>\n            <van-col span=\"6\">\n                <div @click=\"toMyVote\">\n                    <span style=\"display: block;font-weight:bold;text-align: center\">{{voteNum}}</span>\n                    <span style=\"display: block;font-size: x-small;color: #969799;text-align: center\">发起</span>\n                </div>\n            </van-col>\n            <van-col span=\"6\">\n                <div>\n                    <span style=\"display: block;font-weight:bold;text-align: center\">0</span>\n                    <span style=\"display: block;font-size: x-small;color: #969799;text-align: center\">投票</span>\n                </div>\n            </van-col>\n        </van-row>\n        <hr style=\"height: 5px\">\n        <van-cell-group>\n            <div class=\"d-flex bd-highlight\">\n                <div class=\"p-2 w-100 bd-highlight d-flex\">\n                    <img src=\"../assets/images/h2.png\" style=\"margin: 4px\" height=\"30\"/>\n                    <span style=\"display:block;font-weight:bold;margin-top: 6px\">客服/合作</span>\n                </div>\n                <div class=\"p-2 flex-shrink-1 bd-highlight\">\n                    <van-icon name=\"arrow\" style=\"margin-top: 10px\"/>\n                </div>\n            </div>\n        </van-cell-group>\n        <van-cell-group>\n            <div class=\"d-flex bd-highlight\">\n                <div class=\"p-2 w-100 bd-highlight d-flex\">\n                    <img src=\"../assets/images/h3.png\" style=\"margin: 4px\" height=\"30\"/>\n                    <span style=\"display:block;font-weight:bold;margin-top: 6px\">常见问题</span>\n                </div>\n                <div class=\"p-2 flex-shrink-1 bd-highlight\">\n                    <van-icon name=\"arrow\" style=\"margin-top: 10px\"/>\n                </div>\n            </div>\n        </van-cell-group>\n        <van-cell-group>\n            <div class=\"d-flex bd-highlight\">\n                <div class=\"p-2 w-100 bd-highlight d-flex\">\n                    <img src=\"../assets/images/h4.png\" style=\"margin: 4px\" height=\"30\"/>\n                    <span style=\"display:block;font-weight:bold;margin-top: 6px\">我的消息</span>\n                </div>\n                <div class=\"p-2 flex-shrink-1 bd-highlight\">\n                    <van-icon name=\"arrow\" style=\"margin-top: 10px\"/>\n                </div>\n            </div>\n        </van-cell-group>\n    </div>\n</template>\n<script>\n    export default {\n        name: 'about',\n        components: {},\n        data() {\n            return {\n                show: false,\n                showLoading:false,\n                isLogin: false,\n                loginUser: {},\n                voteNum: 0,\n                avatarList: [],\n                avatarUrl:''\n            }\n        },\n        methods: {\n            doLogout: function () {\n                if (this.isLogin) {\n                    if (sessionStorage.getItem(\"loginUser\") != null) {\n                        sessionStorage.removeItem(\"loginUser\");\n                    }\n                    if (localStorage.getItem(\"loginUser\") != null) {\n                        localStorage.removeItem(\"loginUser\");\n                    }\n                }\n                window.location.href = '/about'\n            },\n            toMyVote() {\n                window.location.href = '/myVote'\n            },\n            getVoteNum() {\n                let that = this;\n                let url =this.website+ \"/vote/getVoteNum\";\n                this.axios.get(url, {\n                    params: {\n                        creatorId: this.loginUser.id\n                    }\n                }).then(function (response) {\n                    if (response.data.code == 200) {\n                        //console.log(\"查询成功\");\n                        that.voteNum = response.data.data;\n                    } else {\n                        //console.log(\"查询失败\");\n                    }\n                }).catch(function ( ) {\n                    // eslint-disable-next-line no-console\n                    //console.log( );\n                })\n            },\n            showPopup() {\n                this.show = true;\n            },\n            uploadAvatar() {\n                let that=this;\n                this.showLoading=true;\n                let config = {\n                    headers: { //添加请求头\n                        \"Content-Type\": \"multipart/form-data\"\n                    }\n                };\n                let uploadUrl = this.website+\"/user/uploadAvatar\";\n                let params = new FormData(); //创建form对象\n                params.append(\"file\", this.avatarList[0].file); //通过append向form对象添加数据\n                params.append(\"userId\",this.loginUser.id);\n                this.axios.post(uploadUrl, params, config).then(function (response) {\n                    if (response.data.code == 200) {\n                        //console.log(\"头像上传成功\");\n                        that.show=false;\n                        that.loginUser.avatar=response.data.data;\n                    } else {\n                        //console.log(\"上传失败\");\n                    }\n                }).catch(function ( ) {\n                    // eslint-disable-next-line no-console\n                    //console.log( );\n                })\n            }\n        },\n        mounted() {\n            if (sessionStorage.getItem(\"loginUser\") != null || localStorage.getItem(\"loginUser\") != null) {\n                this.isLogin = true;\n                if (sessionStorage.getItem(\"loginUser\") != null) {\n                    this.loginUser = JSON.parse(sessionStorage.getItem(\"loginUser\"));\n                }\n                if (localStorage.getItem(\"loginUser\") != null) {\n                    this.loginUser = JSON.parse(localStorage.getItem(\"loginUser\"));\n                }\n            }\n            this.avatarUrl=this.imgUrl+this.loginUser.avatar;\n            this.getVoteNum();\n        }\n    }\n</script>\n<style scoped>\n    hr {\n        margin-top: 0px;\n        margin: 0;\n        border: 0;\n        color: #e0e0e0;\n        background-color: #e0e0e0;\n        height: 1px\n    }\n</style>"],"sourceRoot":"src/views"}]}